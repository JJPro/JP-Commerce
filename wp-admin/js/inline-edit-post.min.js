var inlineEditPost;
(function(a){inlineEditPost={init:function(){var c=this,b=a("#inline-edit"),d=a("#bulk-edit");c.type=a("table.widefat").hasClass("pages")?"page":"post";c.what="#post-";b.keyup(function(a){if(27===a.which)return inlineEditPost.revert()});d.keyup(function(a){if(27===a.which)return inlineEditPost.revert()});a(".cancel",b).click(function(){return inlineEditPost.revert()});a(".save",b).click(function(){return inlineEditPost.save(this)});a("td",b).keydown(function(c){if(13===c.which&&!a(c.target).hasClass("cancel"))return inlineEditPost.save(this)});
a(".cancel",d).click(function(){return inlineEditPost.revert()});a('#inline-edit .inline-edit-private input[value="private"]').click(function(){var c=a("input.inline-edit-password-input");a(this).prop("checked")?c.val("").prop("disabled",!0):c.prop("disabled",!1)});a("#the-list").on("click","a.editinline",function(a){a.preventDefault();inlineEditPost.edit(this)});a("#bulk-edit").find("fieldset:first").after(a("#inline-edit fieldset.inline-edit-categories").clone()).siblings("fieldset:last").prepend(a("#inline-edit label.inline-edit-tags").clone());
a('select[name="_status"] option[value="future"]',d).remove();a("#doaction, #doaction2").click(function(b){var d=a(this).attr("id").substr(2);"edit"===a('select[name="'+d+'"]').val()?(b.preventDefault(),c.setBulk()):0<a("form#posts-filter tr.inline-editor").length&&c.revert()})},toggle:function(c){"none"===a(this.what+this.getId(c)).css("display")?this.revert():this.edit(c)},setBulk:function(){var c="",b=this.type,d=!0;this.revert();a("#bulk-edit td").attr("colspan",a("th:visible, td:visible",".widefat:first thead").length);
a("table.widefat tbody").prepend(a("#bulk-edit")).prepend('<tr class="hidden"></tr>');a("#bulk-edit").addClass("inline-editor").show();a('tbody th.check-column input[type="checkbox"]').each(function(){if(a(this).prop("checked")){d=!1;var b=a(this).val(),e;e=a("#inline_"+b+" .post_title").html()||inlineEditL10n.notitle;c+='<div id="ttle'+b+'"><a id="_'+b+'" class="ntdelbutton" title="'+inlineEditL10n.ntdeltitle+'">X</a>'+e+"</div>"}});if(d)return this.revert();a("#bulk-titles").html(c);a("#bulk-titles a").click(function(){var c=
a(this).attr("id").substr(1);a('table.widefat input[value="'+c+'"]').prop("checked",!1);a("#ttle"+c).remove()});"post"===b&&a('tr.inline-editor textarea[name="tax_input[post_tag]"]').suggest(ajaxurl+"?action=ajax-tag-search&tax=post_tag",{delay:500,minchars:2,multiple:!0,multipleSep:inlineEditL10n.comma});a("html, body").animate({scrollTop:0},"fast")},edit:function(c){var b,d,f,e,h=!0,g,k;this.revert();"object"===typeof c&&(c=this.getId(c));b="post_title post_name post_author _status jj mm aa hh mn ss post_password post_format menu_order".split(" ");
"page"===this.type&&b.push("post_parent","page_template");d=a("#inline-edit").clone(!0);a("td",d).attr("colspan",a("th:visible, td:visible",".widefat:first thead").length);a(this.what+c).removeClass("is-expanded").hide().after(d).after('<tr class="hidden"></tr>');f=a("#inline_"+c);a(':input[name="post_author"] option[value="'+a(".post_author",f).text()+'"]',d).val()||a(':input[name="post_author"]',d).prepend('<option value="'+a(".post_author",f).text()+'">'+a("#"+this.type+"-"+c+" .author").text()+
"</option>");1===a(':input[name="post_author"] option',d).length&&a("label.inline-edit-author",d).hide();k=a(".post_format",f).text();a("option.unsupported",d).each(function(){var c=a(this);c.val()!==k&&c.remove()});for(e=0;e<b.length;e++)g=a("."+b[e],f),g.find("img").replaceWith(function(){return this.alt}),g=g.text(),a(':input[name="'+b[e]+'"]',d).val(g);"open"===a(".comment_status",f).text()&&a('input[name="comment_status"]',d).prop("checked",!0);"open"===a(".ping_status",f).text()&&a('input[name="ping_status"]',
d).prop("checked",!0);"sticky"===a(".sticky",f).text()&&a('input[name="sticky"]',d).prop("checked",!0);a(".post_category",f).each(function(){var b,e=a(this).text();e&&(b=a(this).attr("id").replace("_"+c,""),a("ul."+b+"-checklist :checkbox",d).val(e.split(",")))});a(".tags_input",f).each(function(){var b=a(this),e=a(this).attr("id").replace("_"+c,""),f=a("textarea.tax_input_"+e,d),g=inlineEditL10n.comma;b.find("img").replaceWith(function(){return this.alt});if(b=b.text())","!==g&&(b=b.replace(/,/g,
g)),f.val(b);f.suggest(ajaxurl+"?action=ajax-tag-search&tax="+e,{delay:500,minchars:2,multiple:!0,multipleSep:inlineEditL10n.comma})});b=a("._status",f).text();"future"!==b&&a('select[name="_status"] option[value="future"]',d).remove();f=a(".inline-edit-password-input").prop("disabled",!1);"private"===b&&(a('input[name="keep_private"]',d).prop("checked",!0),f.val("").prop("disabled",!0));b=a('select[name="post_parent"] option[value="'+c+'"]',d);if(0<b.length){f=b[0].className.split("-")[1];for(e=
b;h;){e=e.next("option");if(0===e.length)break;g=e[0].className.split("-")[1];g<=f?h=!1:(e.remove(),e=b)}b.remove()}a(d).attr("id","edit-"+c).addClass("inline-editor").show();a(".ptitle",d).focus();return!1},save:function(c){var b;b=a(".post_status_page").val()||"";"object"===typeof c&&(c=this.getId(c));a("table.widefat .spinner").addClass("is-active");b={action:"inline-save",post_type:typenow,post_ID:c,edit_date:"true",post_status:b};b=a("#edit-"+c).find(":input").serialize()+"&"+a.param(b);a.post(ajaxurl,
b,function(b){a("table.widefat .spinner").removeClass("is-active");a(".ac_results").hide();b?-1!==b.indexOf("<tr")?(a(inlineEditPost.what+c).siblings("tr.hidden").addBack().remove(),a("#edit-"+c).before(b).remove(),a(inlineEditPost.what+c).hide().fadeIn()):(b=b.replace(/<.[^<>]*?>/g,""),a("#edit-"+c+" .inline-edit-save .error").html(b).show()):a("#edit-"+c+" .inline-edit-save .error").html(inlineEditL10n.error).show()},"html");return!1},revert:function(){var c=a(".widefat"),b=a(".inline-editor",c).attr("id");
b&&(a(".spinner",c).removeClass("is-active"),a(".ac_results").hide(),"bulk-edit"===b?(a("#bulk-edit",c).removeClass("inline-editor").hide().siblings(".hidden").remove(),a("#bulk-titles").empty(),a("#inlineedit").append(a("#bulk-edit"))):(a("#"+b).siblings("tr.hidden").addBack().remove(),b=b.substr(b.lastIndexOf("-")+1),a(this.what+b).show()));return!1},getId:function(c){c=a(c).closest("tr").attr("id").split("-");return c[c.length-1]}};a(document).ready(function(){inlineEditPost.init()});a(document).on("heartbeat-tick.wp-check-locked-posts",
function(c,b){var d=b["wp-check-locked-posts"]||{};a("#the-list tr").each(function(b,c){var h=c.id,g=a(c);d.hasOwnProperty(h)?g.hasClass("wp-locked")||(h=d[h],g.find(".column-title .locked-text").text(h.text),g.find(".check-column checkbox").prop("checked",!1),h.avatar_src&&(h=a('<img class="avatar avatar-18 photo" width="18" height="18" alt="" />').attr("src",h.avatar_src.replace(/&amp;/g,"&")),g.find(".column-title .locked-avatar").empty().append(h)),g.addClass("wp-locked")):g.hasClass("wp-locked")&&
g.removeClass("wp-locked").delay(1E3).find(".locked-info span").empty()})}).on("heartbeat-send.wp-check-locked-posts",function(c,b){var d=[];a("#the-list tr").each(function(a,b){b.id&&d.push(b.id)});d.length&&(b["wp-check-locked-posts"]=d)}).ready(function(){"undefined"!==typeof wp&&wp.heartbeat&&wp.heartbeat.interval(15)})})(jQuery);
