(function(c,d){c.widget("wp.wpColorPicker",{options:{defaultColor:!1,change:!1,clear:!1,hide:!0,palettes:!0,width:255,mode:"hsv"},_create:function(){if(c.support.iris){var a=this,b=a.element;c.extend(a.options,b.data());a.close=c.proxy(a.close,a);a.initialValue=b.val();b.addClass("wp-color-picker").hide().wrap('<div class="wp-picker-container" />');a.wrap=b.parent();a.toggler=c('<a tabindex="0" class="wp-color-result" />').insertBefore(b).css({backgroundColor:a.initialValue}).attr("title",wpColorPickerL10n.pick).attr("data-current",
wpColorPickerL10n.current);a.pickerContainer=c('<div class="wp-picker-holder" />').insertAfter(b);a.button=c('<input type="button" class="button button-small hidden" />');a.options.defaultColor?a.button.addClass("wp-picker-default").val(wpColorPickerL10n.defaultString):a.button.addClass("wp-picker-clear").val(wpColorPickerL10n.clear);b.wrap('<span class="wp-picker-input-wrap" />').after(a.button);b.iris({target:a.pickerContainer,hide:a.options.hide,width:a.options.width,mode:a.options.mode,palettes:a.options.palettes,
change:function(b,d){a.toggler.css({backgroundColor:d.color.toString()});c.isFunction(a.options.change)&&a.options.change.call(this,b,d)}});b.val(a.initialValue);a._addListeners();a.options.hide||a.toggler.click()}},_addListeners:function(){var a=this;a.wrap.on("click.wpcolorpicker",function(a){a.stopPropagation()});a.toggler.click(function(){a.toggler.hasClass("wp-picker-open")?a.close():a.open()});a.element.change(function(b){var d=c(this).val();if(""===d||"#"===d)a.toggler.css("backgroundColor",
""),c.isFunction(a.options.clear)&&a.options.clear.call(this,b)});a.toggler.on("keyup",function(b){if(13===b.keyCode||32===b.keyCode)b.preventDefault(),a.toggler.trigger("click").next().focus()});a.button.click(function(b){var d=c(this);d.hasClass("wp-picker-clear")?(a.element.val(""),a.toggler.css("backgroundColor",""),c.isFunction(a.options.clear)&&a.options.clear.call(this,b)):d.hasClass("wp-picker-default")&&a.element.val(a.options.defaultColor).change()})},open:function(){this.element.show().iris("toggle").focus();
this.button.removeClass("hidden");this.wrap.addClass("wp-picker-active");this.toggler.addClass("wp-picker-open");c("body").trigger("click.wpcolorpicker").on("click.wpcolorpicker",this.close)},close:function(){this.element.hide().iris("toggle");this.button.addClass("hidden");this.wrap.removeClass("wp-picker-active");this.toggler.removeClass("wp-picker-open");c("body").off("click.wpcolorpicker",this.close)},color:function(a){if(a===d)return this.element.iris("option","color");this.element.iris("option",
"color",a)},defaultColor:function(a){if(a===d)return this.options.defaultColor;this.options.defaultColor=a}})})(jQuery);
