jQuery(document).ready(function(a){var b,c,d,e=!1;b=function(){var b=a(".menu_order_input"),c=b.length;b.each(function(b){b=e?c-b:1+b;a(this).val(b)})};c=function(b){b=b||0;a(".menu_order_input").each(function(){if("0"===this.value||b)this.value=""})};a("#asc").click(function(){e=!1;b();return!1});a("#desc").click(function(){e=!0;b();return!1});a("#clear").click(function(){c(1);return!1});a("#showall").click(function(){a("#sort-buttons span a").toggle();a("a.describe-toggle-on").hide();a("a.describe-toggle-off, table.slidetoggle").show();
a("img.pinkynail").toggle(!1);return!1});a("#hideall").click(function(){a("#sort-buttons span a").toggle();a("a.describe-toggle-on").show();a("a.describe-toggle-off, table.slidetoggle").hide();a("img.pinkynail").toggle(!0);return!1});(function(){a("#media-items").sortable({items:"div.media-item",placeholder:"sorthelper",axis:"y",distance:2,handle:"div.filename",stop:function(){var b=a("#media-items").sortable("toArray"),c=b.length;a.each(b,function(b,d){var f=e?c-b:1+b;a("#"+d+" .menu_order input").val(f)})}})})();
c();1<a("#media-items>*").length&&(d=wpgallery.getWin(),a("#save-all, #gallery-settings").show(),"undefined"!==typeof d.tinyMCE&&d.tinyMCE.activeEditor&&!d.tinyMCE.activeEditor.isHidden()?(wpgallery.mcemode=!0,wpgallery.init()):a("#insert-gallery").show())});jQuery(window).unload(function(){tinymce=tinyMCE=wpgallery=null});var tinymce=null,tinyMCE,wpgallery;
wpgallery={mcemode:!1,editor:{},dom:{},is_update:!1,el:{},I:function(a){return document.getElementById(a)},init:function(){var a,b,c,d,e=this.getWin();if(this.mcemode){a=(""+document.location.search).replace(/^\?/,"").split("&");b={};for(c=0;c<a.length;c++)d=a[c].split("="),b[unescape(d[0])]=unescape(d[1]);b.mce_rdomain&&(document.domain=b.mce_rdomain);tinymce=e.tinymce;tinyMCE=e.tinyMCE;this.editor=tinymce.EditorManager.activeEditor;this.setup()}},getWin:function(){return window.dialogArguments||
opener||parent||top},setup:function(){var a,b=this.editor,c,d;if(this.mcemode){this.el=b.selection.getNode();if("IMG"!==this.el.nodeName||!b.dom.hasClass(this.el,"wpGallery"))if((a=b.dom.select("img.wpGallery"))&&a[0])this.el=a[0];else{"1"===getUserSetting("galfile")&&(this.I("linkto-file").checked="checked");"1"===getUserSetting("galdesc")&&(this.I("order-desc").checked="checked");getUserSetting("galcols")&&(this.I("columns").value=getUserSetting("galcols"));getUserSetting("galord")&&(this.I("orderby").value=
getUserSetting("galord"));jQuery("#insert-gallery").show();return}a=b.dom.getAttrib(this.el,"title");(a=b.dom.decode(a))?(jQuery("#update-gallery").show(),this.is_update=!0,b=a.match(/columns=['"]([0-9]+)['"]/),c=a.match(/link=['"]([^'"]+)['"]/i),d=a.match(/order=['"]([^'"]+)['"]/i),a=a.match(/orderby=['"]([^'"]+)['"]/i),c&&c[1]&&(this.I("linkto-file").checked="checked"),d&&d[1]&&(this.I("order-desc").checked="checked"),b&&b[1]&&(this.I("columns").value=""+b[1]),a&&a[1]&&(this.I("orderby").value=
a[1])):jQuery("#insert-gallery").show()}},update:function(){var a=this.editor,b="";this.mcemode&&this.is_update?"IMG"===this.el.nodeName&&(b=a.dom.decode(a.dom.getAttrib(this.el,"title")),b=b.replace(/\s*(order|link|columns|orderby)=['"]([^'"]+)['"]/gi,""),b+=this.getSettings(),a.dom.setAttrib(this.el,"title",b),this.getWin().tb_remove()):(a="[gallery"+this.getSettings()+"]",this.getWin().send_to_editor(a))},getSettings:function(){var a=this.I,b="";a("linkto-file").checked&&(b+=' link="file"',setUserSetting("galfile",
"1"));a("order-desc").checked&&(b+=' order="DESC"',setUserSetting("galdesc","1"));3!==a("columns").value&&(b+=' columns="'+a("columns").value+'"',setUserSetting("galcols",a("columns").value));"menu_order"!==a("orderby").value&&(b+=' orderby="'+a("orderby").value+'"',setUserSetting("galord",a("orderby").value));return b}};
