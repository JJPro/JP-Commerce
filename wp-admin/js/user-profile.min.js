(function(a){function p(){"function"!==typeof zxcvbn?setTimeout(p,50):(b.val(b.data("pw")),b.trigger("pwupdate").trigger("wp-check-valid-field"),1!==parseInt(e.data("start-masked"),10)?k.addClass("show-password"):e.trigger("click"))}function w(){var d=a("#pass-strength-result")[0];f=b.val();k=b.parent();c=a('<input type="text"/>').attr({id:"pass1-text",name:"pass1-text",autocomplete:"off"}).addClass(b[0].className).data("pw",b.data("pw")).val(b.val()).on(l,function(){c.val()!==f&&(h.val(c.val()),
b.val(c.val()).trigger("pwupdate"),f=c.val())});b.after(c);1===parseInt(b.data("reveal"),10)&&p();b.on(l+" pwupdate",function(){b.val()!==f&&(f=b.val(),c.val()!==f&&c.val(f),b.add(c).removeClass("short bad good strong"),d.className&&(b.add(c).addClass(d.className),"short"===d.className||"bad"===d.className?(q.prop("checked")||m.prop("disabled",!0),r.show()):(m.prop("disabled",!1),r.hide())))})}function x(){e=g.find(".wp-hide-pw");e.show().on("click",function(){1===parseInt(e.data("toggle"),10)?(k.addClass("show-password"),
e.data("toggle",0).attr({"aria-label":userProfileL10n.ariaHide}).find(".text").text(userProfileL10n.hide).end().find(".dashicons").removeClass("dashicons-visibility").addClass("dashicons-hidden"),c.focus(),u.attr("for","pass1-text"),_.isUndefined(c[0].setSelectionRange)||c[0].setSelectionRange(0,100)):(k.removeClass("show-password"),e.data("toggle",1).attr({"aria-label":userProfileL10n.ariaShow}).find(".text").text(userProfileL10n.show).end().find(".dashicons").removeClass("dashicons-hidden").addClass("dashicons-visibility"),
b.focus(),u.attr("for","pass1"),_.isUndefined(b[0].setSelectionRange)||b[0].setSelectionRange(0,100))})}function y(){var d,t;g=a(".user-pass1-wrap");u=g.find("th label").attr("for","pass1-text");a(".user-pass2-wrap").hide();v=a("#submit").on("click",function(){n=!1});m=v.add(" #createusersub");r=a(".pw-weak");q=r.find(".pw-checkbox");q.change(function(){m.prop("disabled",!q.prop("checked"))});b=a("#pass1");b.length&&w();h=a("#pass2").on(l,function(){0<h.val().length&&(b.val(h.val()),h.val(""),f="",
b.trigger("pwupdate"))});d=g.find(".wp-pwd").hide();x();t=g.find("button.wp-generate-pw").show();t.on("click",function(){n=!0;t.hide();d.show();0===c.val().length&&p();_.defer(function(){c.focus();_.isUndefined(c[0].setSelectionRange)||c[0].setSelectionRange(0,100)},0)});g.find("button.wp-cancel-pw").on("click",function(){n=!1;t.show();d.hide();b.val("").trigger("pwupdate");m.prop("disabled",!1)});g.closest("form").on("submit",function(){n=!1;h.val(b.val());k.removeClass("show-password")})}function z(){var b=
a("#pass1").val();a("#pass-strength-result").removeClass("short bad good strong");if(b)switch(b=wp.passwordStrength.meter(b,wp.passwordStrength.userInputBlacklist(),b),b){case 2:a("#pass-strength-result").addClass("bad").html(pwsL10n.bad);break;case 3:a("#pass-strength-result").addClass("good").html(pwsL10n.good);break;case 4:a("#pass-strength-result").addClass("strong").html(pwsL10n.strong);break;case 5:a("#pass-strength-result").addClass("short").html(pwsL10n.mismatch);break;default:a("#pass-strength-result").addClass("short").html(pwsL10n["short"])}else a("#pass-strength-result").html("&nbsp;")}
var n=!1,g,k,b,c,u,h,r,q,e,m,v,f,l;l="oninput"in document.createElement("input")?"input":"keyup";a(document).ready(function(){var b,c,f,e,g=a("#display_name");a("#pass1").val("").on(l+" pwupdate",z);a("#pass-strength-result").show();a(".color-palette").click(function(){a(this).siblings('input[name="admin_color"]').prop("checked",!0)});g.length&&a("#first_name, #last_name, #nickname").bind("blur.user_profile",function(){var b=[],c={display_nickname:a("#nickname").val()||"",display_username:a("#user_login").val()||
"",display_firstname:a("#first_name").val()||"",display_lastname:a("#last_name").val()||""};c.display_firstname&&c.display_lastname&&(c.display_firstlast=c.display_firstname+" "+c.display_lastname,c.display_lastfirst=c.display_lastname+" "+c.display_firstname);a.each(a("option",g),function(a,c){b.push(c.value)});a.each(c,function(f,e){if(e){var d=e.replace(/<\/?[a-z][^>]*>/gi,"");c[f].length&&-1===a.inArray(d,b)&&(b.push(d),a("<option />",{text:d}).appendTo(g))}})});b=a("#color-picker");c=a("#colors-css");
f=a("input#user_id").val();e=a('input[name="checkuser_id"]').val();b.on("click.colorpicker",".color-option",function(){var b,d=a(this);if(!d.hasClass("selected")&&(d.siblings(".selected").removeClass("selected"),d.addClass("selected").find('input[type="radio"]').prop("checked",!0),f===e)){0===c.length&&(c=a('<link rel="stylesheet" />').appendTo("head"));c.attr("href",d.children(".css_url").val());if("undefined"!==typeof wp&&wp.svgPainter){try{b=a.parseJSON(d.children(".icon_colors").val())}catch(g){}b&&
(wp.svgPainter.setColors(b),wp.svgPainter.paint())}a.post(ajaxurl,{action:"save-user-color-scheme",color_scheme:d.children('input[name="admin_color"]').val(),nonce:a("#color-nonce").val()}).done(function(b){b.success&&a("body").removeClass(b.data.previousScheme).addClass(b.data.currentScheme)})}});y()});a("#destroy-sessions").on("click",function(b){var c=a(this);wp.ajax.post("destroy-sessions",{nonce:a("#_wpnonce").val(),user_id:a("#user_id").val()}).done(function(a){c.prop("disabled",!0);c.siblings(".notice").remove();
c.before('<div class="notice notice-success inline"><p>'+a.message+"</p></div>")}).fail(function(a){c.siblings(".notice").remove();c.before('<div class="notice notice-error inline"><p>'+a.message+"</p></div>")});b.preventDefault()});window.generatePassword=p;a(window).on("beforeunload",function(){if(!0===n)return userProfileL10n.warn})})(jQuery);
