jQuery(function(b){function f(a){a.selectable({selecting:function(e,c){1<b(".ui-selected, .ui-selecting",e.target).length&&b(c.selecting).removeClass("ui-selecting")},selected:function(e,c){var a=b(c.selected).data("node-obj");if(h(a)){var d;d=h(a)?a.children:[];d=g(d);b("#selectables-wrap").append(f(d))}b("#artwork_type").val(a.term_id)},unselected:function(a,c){ui_selected=[];b(a.target).nextAll().remove()}});return a}function h(a){for(var e=[],c=0,f=end_nodes.length;c<f;c++)e.push(end_nodes[c].term_id);
return!(0<=b.inArray(a.term_id,e))}function g(a){for(var e=b("<ul/>",{"class":"selectable"}),c=0,f=a.length;c<f;c++){var d=a[c],g=b("<li>").html(d.name).data("node-obj",d);for(j in ui_selected)d.term_id==ui_selected[j]&&g.addClass("ui-selected");h(d)&&g.addClass("has-children");e.append(g)}return e}if(ui_selected instanceof Array&&0<ui_selected.length)for(var k=nodes.slice(),l=0,m=ui_selected.length;l<m;l++)b("#selectables-wrap").append(f(g(k))),k=b.grep(k,function(a,b){return a.term_id==ui_selected[l]})[0].children;
else b("#selectables-wrap").append(f(g(nodes)))});
