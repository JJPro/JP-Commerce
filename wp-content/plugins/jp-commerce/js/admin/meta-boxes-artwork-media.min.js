jQuery(function(b){console.log("initializing media meta box");b(window).on("dragover",function(c){c=c||event;c.preventDefault()});b(window).on("drop",function(c){c=c||event;c.preventDefault()});b("body").on("click",".dz-feature",function(c){if(!b(this).hasClass("fa-heart")){var a=this;c=b(".dz-feature").index(this);b.ajax({url:jc_data.ajaxurl,method:"post",data:{action:"jp_commerce_set_artwork_featured_image",nonce:e,name:Dropzone.instances[0].files[c].name,post_id:f,author_id:g}}).success(function(){b(".fa-heart").removeClass("fa-heart").addClass("fa-heart-o");
b(a).removeClass("fa-heart-o").addClass("fa-heart")}).error(function(){console.log("failed to set featured image on server.")})}});Dropzone.autoDiscover=!1;var f=b("#media-upload-wrap").attr("data-post_id"),g=b("#media-upload-wrap").attr("data-author_id"),e=b("#media-upload-wrap").attr("data-nonce");b("#media-upload-wrap").dropzone({url:jc_data.ajaxurl,method:"post",maxFiles:5,acceptedFiles:"image/*",uploadMultiple:!1,previewTemplate:'<div class="dz-preview dz-file-preview">   <div class="dz-details">       <img data-dz-thumbnail />   </div>   <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>    <div class="controls">       <i class="dz-remove fa fa-close" data-dz-remove></i>       <i class="dz-feature fa fa-heart-o"></i>   </div></div> ',
clickable:".dz-clickable",dictInvalidFileType:"Invalid file type.",dictResponseError:"Upload Failed. \nError Code: {{statusCode}}.",dictMaxFilesExceeded:"Exceeded number of files allowed."});var a=Dropzone.instances[0];a.on("addedfile",function(){b("#media-upload-wrap").append(b("#upload-indicator-wrap"))});a.on("maxfilesexceeded",function(c){this.removeFile(c)});a.on("removedfile",function(c){4==this.files.length&&this.enable();console.log(c);b.ajax({url:jc_data.ajaxurl,method:"post",data:{action:"jp_commerce_remove_artwork_media",
nonce:e,name:c.name,post_id:f,author_id:g}}).done(function(){alert("file is successfully deleted.")}).fail(function(){alert("failed to delete file from server.")})});a.on("sending",function(c,b,a){a.append("action","jp_commerce_upload_artwork_media");a.append("post_id",f);a.append("author_id",g);a.append("nonce",e)});a.on("success",function(a,b){console.log(b)});var h=existing_thumbnails.length;console.log("file count: "+h);a.options.maxFiles-=h;for(var k,l=0;l<h;l++){k=existing_thumbnails[l];var d=
{name:k.name,size:123};console.log("mockFile: "+d.size);a.files.push(d);a.emit("addedfile",d);a.emit("thumbnail",d,k.url);a.emit("complete",d)}});
