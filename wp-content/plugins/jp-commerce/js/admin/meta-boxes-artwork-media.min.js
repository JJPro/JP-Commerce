jQuery(function(a){console.log("initializing media meta box");a(window).on("dragover",function(c){c=c||event;c.preventDefault()});a(window).on("drop",function(c){c=c||event;c.preventDefault()});a("body").on("click",".dz-feature",function(c){if(!a(this).hasClass("fa-heart")){var b=this;c=a(".dz-feature").index(this);a.ajax({url:jc_data.ajaxurl,method:"post",data:{action:"jp_commerce_set_artwork_featured_image",nonce:e,name:Dropzone.instances[0].files[c].name,post_id:f,author_id:g}}).success(function(){a(".fa-heart").removeClass("fa-heart").addClass("fa-heart-o");
a(b).removeClass("fa-heart-o").addClass("fa-heart")}).error(function(){console.log("failed to set featured image on server.")})}});Dropzone.autoDiscover=!1;var f=a("#media-upload-wrap").attr("data-post_id"),g=a("#media-upload-wrap").attr("data-author_id"),e=a("#media-upload-wrap").attr("data-nonce");a("#media-upload-wrap").dropzone({url:jc_data.ajaxurl,method:"post",maxFiles:5,acceptedFiles:"image/*",uploadMultiple:!1,previewTemplate:'<div class="dz-preview dz-file-preview">   <div class="dz-details">       <img data-dz-thumbnail />   </div>   <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>    <div class="controls">       <i class="dz-remove fa fa-close" data-dz-remove></i>       <i class="dz-feature fa fa-heart-o"></i>   </div></div> ',
clickable:".dz-clickable",dictInvalidFileType:"Invalid file type.",dictResponseError:"Upload Failed. \nError Code: {{statusCode}}.",dictMaxFilesExceeded:"Exceeded number of files allowed."});var b=Dropzone.instances[0];b.on("addedfile",function(){a("#media-upload-wrap").append(a("#upload-indicator-wrap"))});b.on("maxfilesexceeded",function(c){this.removeFile(c)});b.on("removedfile",function(c){4==this.files.length&&this.enable();console.log(c);a.ajax({url:jc_data.ajaxurl,method:"post",data:{action:"jp_commerce_remove_artwork_media",
nonce:e,name:c.name,post_id:f,author_id:g}}).done(function(){alert("file is successfully deleted.")}).fail(function(){alert("failed to delete file from server.")})});b.on("sending",function(c,a,b){b.append("action","jp_commerce_upload_artwork_media");b.append("post_id",f);b.append("author_id",g);b.append("nonce",e)});b.on("success",function(b,a){console.log(a)});var h=existing_thumbnails.length;console.log("file count: "+h);b.options.maxFiles-=h;for(var k,l=0;l<h;l++){k=existing_thumbnails[l];var d=
{name:k.name,size:123};console.log("mockFile: "+d.size);b.emit("addedfile",d);b.emit("thumbnail",d,k.url);b.emit("complete",d)}});
