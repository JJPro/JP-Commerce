window.autosave=function(){return!0};
(function(a,b){b.wp=b.wp||{};b.wp.autosave=function(){function A(h){var d;d=(new Date).getTime();var b=[],e="undefined"!==typeof tinymce&&tinymce.get("content");e&&!e.isHidden()&&d-3E3>w&&(e.save(),w=d);d={post_id:a("#post_ID").val()||0,post_type:a("#post_type").val()||"",post_author:a("#post_author").val()||"",post_title:a("#title").val()||"",content:a("#content").val()||"",excerpt:a("#excerpt").val()||""};if("local"===h)return d;a('input[id^="in-category-"]:checked').each(function(){b.push(this.value)});d.catslist=
b.join(",");if(h=a("#post_name").val())d.post_name=h;if(h=a("#parent_id").val())d.parent_id=h;a("#comment_status").prop("checked")&&(d.comment_status="open");a("#ping_status").prop("checked")&&(d.ping_status="open");"1"===a("#auto_draft").val()&&(d.auto_draft="1");return d}function m(b){return"object"===typeof b?(b.post_title||"")+"::"+(b.content||"")+"::"+(b.excerpt||""):(a("#title").val()||"")+"::"+(a("#content").val()||"")+"::"+(a("#excerpt").val()||"")}function n(){l.trigger("autosave-disable-buttons");
setTimeout(r,5E3)}function r(){l.trigger("autosave-enable-buttons")}var x,w=0,l=a(document);l.on("tinymce-editor-init.autosave",function(a,d){"content"===d.id&&b.setTimeout(function(){d.save();x=m()},1E3)}).ready(function(){x=m()});return{getPostData:A,getCompareString:m,disableButtons:n,enableButtons:r,local:function(){function h(){var a=!1;y&&f&&(a=(a=sessionStorage.getItem("wp-autosave-"+f))?JSON.parse(a):{});return a}function d(){var a=h();return a&&k?a["post_"+k]||!1:!1}function v(a){var c=h();
if(!c||!k)return!1;if(a)c["post_"+k]=a;else if(c.hasOwnProperty("post_"+k))delete c["post_"+k];else return!1;y&&f?(a="wp-autosave-"+f,sessionStorage.setItem(a,JSON.stringify(c)),c=null!==sessionStorage.getItem(a)):c=!1;return c}function e(g){var c;c=!1;if(n||!y)return!1;g?(c=d()||{},a.extend(c,g)):c=A("local");g=m(c);"undefined"===typeof z&&(z=x);if(g===z)return!1;c.save_time=(new Date).getTime();c.status=a("#post_status").val()||"";(c=v(c))&&(z=g);return c}function r(){k=a("#post_ID").val()||0;if(a("#wp-content-wrap").hasClass("tmce-active"))l.on("tinymce-editor-init.autosave",
function(){b.setTimeout(function(){p()},1500)});else p();b.setInterval(e,15E3);a("form#post").on("submit.autosave-local",function(){var g="undefined"!==typeof tinymce&&tinymce.get("content"),c=a("#post_ID").val()||0;if(g&&!g.isHidden())g.on("submit",function(){e({post_title:a("#title").val()||"",content:a("#content").val()||"",excerpt:a("#excerpt").val()||""})});else e({post_title:a("#title").val()||"",content:a("#content").val()||"",excerpt:a("#excerpt").val()||""});wpCookies.set("wp-saving-post",
c+"-check",86400)})}function q(a,c){return(a||"").toString().replace(/[\x20\t\r\n\f]+/g,"")===(c||"").toString().replace(/[\x20\t\r\n\f]+/g,"")}function p(){var g,c,b,f,e=d();wpCookies.get("wp-saving-post")===k+"-saved"?(wpCookies.remove("wp-saving-post"),v(!1)):e&&!a("#has-newer-autosave").length&&(g=a("#content").val()||"",c=a("#title").val()||"",b=a("#excerpt").val()||"",q(g,e.content)&&q(c,e.post_title)&&q(b,e.excerpt)||(t=e,B={content:g,post_title:c,excerpt:b},f=a("#local-storage-notice"),a(".wrap h2").first().after(f.addClass("notice-warning").show()),
f.on("click.autosave-local",function(c){var b=a(c.target);b.hasClass("restore-backup")?(u(t),b.parent().hide(),a(this).find("p.undo-restore").show(),f.removeClass("notice-warning").addClass("notice-success")):b.hasClass("undo-restore-backup")&&(u(B),b.parent().hide(),a(this).find("p.local-restore").show(),f.removeClass("notice-success").addClass("notice-warning"));c.preventDefault()})))}function u(b){var c;return b?(z=m(b),a("#title").val()!==b.post_title&&a("#title").focus().val(b.post_title||""),
a("#excerpt").val(b.excerpt||""),(c="undefined"!==typeof tinymce&&tinymce.get("content"))&&!c.isHidden()&&"undefined"!==typeof switchEditors?(c.undoManager.add(),c.setContent(b.content?switchEditors.wpautop(b.content):"")):(a("#content-html").click(),a("#content").val(b.content)),!0):!1}var t,B,f,k,y,z,n=!1;f="undefined"!==typeof b.autosaveL10n&&b.autosaveL10n.blog_id;(function(){var a=Math.random().toString(),c=!1;try{b.sessionStorage.setItem("wp-test",a),c=b.sessionStorage.getItem("wp-test")===
a,b.sessionStorage.removeItem("wp-test")}catch(f){}return y=c})()&&f&&(a("#content").length||a("#excerpt").length)&&l.ready(r);return{hasStorage:y,getSavedPostData:d,save:e,suspend:function(){n=!0},resume:function(){n=!1}}}(),server:function(){function h(){e=!0;b.clearTimeout(w);w=b.setTimeout(function(){e=!1},1E4)}function d(){var d,f;if(t||e||!b.autosave()||(new Date).getTime()<u)return!1;d=A();f=m(d);"undefined"===typeof p&&(p=x);if(f===p)return!1;q=f;h();n();l.trigger("wpcountwords",[d.content]).trigger("before-autosave",
[d]);d._wpnonce=a("#_wpnonce").val()||"";return d}function v(){u=(new Date).getTime()+1E3*autosaveL10n.autosaveInterval||6E4}var e,w,q,p,u=0,t=!1;l.on("heartbeat-send.autosave",function(a,b){var e=d();e&&(b.wp_autosave=e)}).on("heartbeat-tick.autosave",function(b,d){if(d.wp_autosave){var k=d.wp_autosave;v();e=!1;p=q;q="";l.trigger("after-autosave",[k]);r();k.success&&a("#auto_draft").val("")}}).on("heartbeat-connection-lost.autosave",function(b,d,e){if("timeout"===d||603===e)b=a("#lost-connection-notice"),
wp.autosave.local.hasStorage||b.find(".hide-if-no-sessionstorage").hide(),b.show(),n()}).on("heartbeat-connection-restored.autosave",function(){a("#lost-connection-notice").hide();r()}).ready(function(){v()});return{tempBlockSave:h,triggerSave:function(){u=0;wp.heartbeat.connectNow()},postChanged:function(){return m()!==x},suspend:function(){t=!0},resume:function(){t=!1}}}()}}()})(jQuery,window);
