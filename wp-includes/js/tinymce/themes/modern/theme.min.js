tinymce.ThemeManager.add("modern",function(b){function u(d,g){var c=[],a;if(d)return m(d.split(/[ ,]/),function(e){function h(){function a(f){return function(b,d){for(var a,h=d.parents.length;h--&&(a=d.parents[h].nodeName,"OL"!=a&&"UL"!=a););e.active(b&&a==f)}}var f=b.selection;"bullist"==d&&f.selectorChanged("ul > li",a("UL"));"numlist"==d&&f.selectorChanged("ol > li",a("OL"));e.settings.stateSelector&&f.selectorChanged(e.settings.stateSelector,function(f){e.active(f)},!0);e.settings.disabledStateSelector&&
f.selectorChanged(e.settings.disabledStateSelector,function(f){e.disabled(f)})}var d;if("|"==e)a=null;else if(r.has(e))e={type:e,size:g},c.push(e),a=null;else if(a||(a={type:"buttongroup",items:[]},c.push(a)),b.buttons[e])if(d=e,e=b.buttons[d],"function"==typeof e&&(e=e()),e.type=e.type||"button",e.size=g,e=r.create(e),a.items.push(e),b.initialized)h();else b.on("init",h)}),{type:"toolbar",layout:"flow",items:c}}function v(b){function g(a){if(a)return c.push(u(a,b)),!0}var c=[];if(tinymce.isArray(d.toolbar)){if(0===
d.toolbar.length)return;tinymce.each(d.toolbar,function(b,a){d["toolbar"+(a+1)]=b});delete d.toolbar}for(var a=1;10>a&&g(d["toolbar"+a]);a++);c.length||!1===d.toolbar||g(d.toolbar||"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image");if(c.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:c}}function w(){function l(a){var e,c,f,g,l;l=tinymce.makeMap((d.removed_menuitems||
"").split(/[ ,]/));d.menu?(c=d.menu[a],g=!0):c=x[a];if(c){e={text:c.title};f=[];m((c.items||"").split(/[ ,]/),function(a){"|"!=a&&!b.menuItems[a]||l[a]||f.push("|"==a?{text:"|"}:b.menuItems[a])});g||m(b.menuItems,function(b){b.context==a&&("before"==b.separator&&f.push({text:"|"}),b.prependToContext?f.unshift(b):f.push(b),"after"==b.separator&&f.push({text:"|"}))});for(c=0;c<f.length;c++)"|"==f[c].text&&(0!==c&&c!=f.length-1||f.splice(c,1));e.menu=f;if(!e.menu.length)return null}return e}var g,c=
[],a=[];if(d.menu)for(g in d.menu)a.push(g);else for(g in x)a.push(g);g="string"==typeof d.menubar?d.menubar.split(/[ ,]/):a;for(a=0;a<g.length;a++){var e=g[a];(e=l(e))&&c.push(e)}return c}function y(d){function g(b){(b=d.find(b)[0])&&b.focus(!0)}b.shortcuts.add("Alt+F9","",function(){g("menubar")});b.shortcuts.add("Alt+F10","",function(){g("toolbar")});b.shortcuts.add("Alt+F11","",function(){g("elementpath")});d.on("cancel",function(){b.focus()})}function t(l,g){var c,a,e,h;e=b.getContainer();h=
b.getContentAreaContainer().firstChild;a=e.clientWidth;c=h.clientWidth;null!==l&&(l=Math.max(d.min_width||100,l),l=Math.min(d.max_width||65535,l),p.setStyle(e,"width",l+(a-c)),p.setStyle(h,"width",l));g=Math.max(d.min_height||100,g);g=Math.min(d.max_height||65535,g);p.setStyle(h,"height",g);b.fire("ResizeEditor")}function z(){function d(f){var a,c;a=tinymce.DOM.getPos(b.getContentAreaContainer());f=b.dom.getRect(f);c=b.dom.getRoot();"BODY"==c.nodeName&&(f.x-=c.ownerDocument.documentElement.scrollLeft||
c.scrollLeft,f.y-=c.ownerDocument.documentElement.scrollTop||c.scrollTop);f.x+=a.x;f.y+=a.y;return f}function g(){m(b.contextToolbars,function(b){b.panel&&b.panel.hide()})}function c(f){var a,c,e,h,k,n;b.removed||(f&&f.toolbar.panel?(n="tc-bc bc-tc tl-bl bl-tl tr-br br-tr".split(" "),k=f.toolbar.panel,k.show(),e=d(f.element),c=tinymce.DOM.getRect(k.getEl()),h=tinymce.DOM.getRect(b.getContentAreaContainer()||b.getBody()),b.inline||(h.w=b.getDoc().documentElement.offsetWidth),b.selection.controlSelection.isResizable(f.element)&&
(e=q.inflate(e,0,7)),(a=q.findBestRelativePosition(c,e,h,n))?(m(n.concat("inside"),function(b){k.classes.toggle("tinymce-inline-"+b,b==a)}),f=q.relativePosition(c,e,a),k.moveTo(f.x,f.y)):(m(n,function(b){k.classes.toggle("tinymce-inline-"+b,!1)}),k.classes.toggle("tinymce-inline-inside",!0),(e=q.intersect(h,e))?(a=q.findBestRelativePosition(c,e,h,["tc-tc","tl-tl","tr-tr"]))?(f=q.relativePosition(c,e,a),k.moveTo(f.x,f.y)):k.moveTo(e.x,e.y):k.hide())):g())}function a(){function f(){b.selection&&c(k(b.selection.getNode()))}
window.requestAnimationFrame?window.requestAnimationFrame(f):f()}function e(){n||(n=b.selection.getScrollContainer()||b.getWin(),tinymce.$(n).on("scroll",a),b.on("remove",function(){tinymce.$(n).off("scroll")}))}function h(){tinymce.each(b.contextToolbars||[],function(b){b.panel&&b.panel.hide()})}function k(a){var c,e,d=b.contextToolbars||[];e=b.$(a).parents().add(a);for(a=e.length-1;0<=a;a--)for(c=d.length-1;0<=c;c--)if(d[c].predicate(e[a]))return{toolbar:d[c],element:e[a]};return null}var n;b.on("click keyup",
function(){window.setTimeout(function(){var a;if(!b.removed)if(a=k(b.selection.getNode())){var d;a.toolbar.panel?a.toolbar.panel.show():(e(),d=r.create({type:"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:u(a.toolbar.items)}),a.toolbar.panel=d,d.renderTo(document.body).reflow());c(a)}else h()},0)});b.on("blur hide",h);b.on("ObjectResizeStart",function(){var a=k(b.selection.getNode());
a&&a.toolbar.panel&&a.toolbar.panel.hide()});b.on("nodeChange ResizeEditor ResizeWindow",a);b.on("remove",function(){tinymce.each(b.contextToolbars||[],function(b){b.panel&&b.panel.remove()});b.contextToolbars={}})}function A(l){function g(){if(h&&h.moveRel&&h.visible()&&!h._fixed){var a=b.selection.getScrollContainer(),c=b.getBody(),e=0,d=0;a&&(d=p.getPos(c),a=p.getPos(a),e=Math.max(0,a.x-d.x),d=Math.max(0,a.y-d.y));h.fixed(!1).moveRel(c,b.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(e,
d)}}function c(){h&&(h.show(),g(),p.addClass(b.getBody(),"mce-edit-focus"))}function a(){h&&(h.hide(),B.hideAll(),p.removeClass(b.getBody(),"mce-edit-focus"))}function e(){h?h.visible()||c():(h=k.panel=r.create({type:m?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!m,border:1,items:[!1===d.menubar?null:{type:"menubar",border:"0 0 1 0",items:w()},v(d.toolbar_items_size)]}),b.fire("BeforeRenderUI"),
h.renderTo(m||document.body).reflow(),y(h),c(),z(),b.on("nodeChange",g),b.on("activate",c),b.on("deactivate",a),b.nodeChanged())}var h,m;d.fixed_toolbar_container&&(m=p.select(d.fixed_toolbar_container)[0]);d.content_editable=!0;b.on("focus",function(){l.skinUiCss?tinymce.DOM.styleSheetLoader.load(l.skinUiCss,e,e):e()});b.on("blur hide",a);b.on("remove",function(){h&&(h.remove(),h=null)});l.skinUiCss&&tinymce.DOM.styleSheetLoader.load(l.skinUiCss);return{}}function C(l){var g,c,a,e;l.skinUiCss&&tinymce.DOM.loadCSS(l.skinUiCss);
a=k.panel=r.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[!1===d.menubar?null:{type:"menubar",border:"0 0 1 0",items:w()},v(d.toolbar_items_size),{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]});!1!==d.resize&&(e={type:"resizehandle",direction:d.resize,onResizeStart:function(){var a=b.getContentAreaContainer().firstChild;g=a.clientWidth;c=a.clientHeight},onResize:function(a){"both"==d.resize?
t(g+a.deltaX,c+a.deltaY):t(null,c+a.deltaY)}});!1!==d.statusbar&&a.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath"},e]});d.readonly&&a.find("*").disabled(!0);b.fire("BeforeRenderUI");a.renderBefore(l.targetNode).reflow();d.width&&tinymce.DOM.setStyle(a.getEl(),"width",d.width);b.on("remove",function(){a.remove();a=null});y(a);z();return{iframeContainer:a.find("#iframe")[0].getEl(),editorContainer:a.getEl()}}var k=this,d=
b.settings,r=tinymce.ui.Factory,m=tinymce.each,p=tinymce.DOM,q=tinymce.ui.Rect,B=tinymce.ui.FloatPanel,x={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}};k.renderUI=function(l){var g=!1!==d.skin?d.skin||
"lightgray":!1;if(g){var c=d.skin_url,c=c?b.documentBaseURI.toAbsolute(c):tinymce.baseURL+"/skins/"+g;l.skinUiCss=7>=tinymce.Env.documentMode?c+"/skin.ie7.min.css":c+"/skin.min.css";b.contentCSS.push(c+"/content"+(b.inline?".inline":"")+".min.css")}b.on("ProgressState",function(a){k.throbber=k.throbber||new tinymce.ui.Throbber(k.panel.getEl("body"));a.state?k.throbber.show(a.time):k.throbber.hide()});return d.inline?A(l):C(l)};k.resizeTo=t;k.resizeBy=function(d,g){var c=b.getContentAreaContainer();
k.resizeTo(c.clientWidth+d,c.clientHeight+g)}});
