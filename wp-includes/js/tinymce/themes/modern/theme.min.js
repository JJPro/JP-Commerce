tinymce.ThemeManager.add("modern",function(b){function u(d,f){var c=[],a;if(d)return p(d.split(/[ ,]/),function(e){function d(){var a=b.selection;"bullist"==k&&a.selectorChanged("ul > li",function(h,b){for(var a,d=b.parents.length;d--&&(a=b.parents[d].nodeName,"OL"!=a&&"UL"!=a););e.active(h&&"UL"==a)});"numlist"==k&&a.selectorChanged("ol > li",function(h,b){for(var a,d=b.parents.length;d--&&(a=b.parents[d].nodeName,"OL"!=a&&"UL"!=a););e.active(h&&"OL"==a)});e.settings.stateSelector&&a.selectorChanged(e.settings.stateSelector,
function(h){e.active(h)},!0);e.settings.disabledStateSelector&&a.selectorChanged(e.settings.disabledStateSelector,function(h){e.disabled(h)})}var k;if("|"==e)a=null;else if(r.has(e))e={type:e,size:f},c.push(e),a=null;else if(a||(a={type:"buttongroup",items:[]},c.push(a)),b.buttons[e])if(k=e,e=b.buttons[k],"function"==typeof e&&(e=e()),e.type=e.type||"button",e.size=f,e=r.create(e),a.items.push(e),b.initialized)d();else b.on("init",d)}),{type:"toolbar",layout:"flow",items:c}}function v(b){function f(a){if(a)return c.push(u(a,
b)),!0}var c=[];if(tinymce.isArray(d.toolbar)){if(0===d.toolbar.length)return;tinymce.each(d.toolbar,function(b,a){d["toolbar"+(a+1)]=b});delete d.toolbar}for(var a=1;10>a&&f(d["toolbar"+a]);a++);c.length||!1===d.toolbar||f(d.toolbar||"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image");if(c.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:c}}function w(){function k(a){var e,
c,h,f,k;k=tinymce.makeMap((d.removed_menuitems||"").split(/[ ,]/));d.menu?(c=d.menu[a],f=!0):c=x[a];if(c){e={text:c.title};h=[];p((c.items||"").split(/[ ,]/),function(a){"|"!=a&&!b.menuItems[a]||k[a]||h.push("|"==a?{text:"|"}:b.menuItems[a])});f||p(b.menuItems,function(b){b.context==a&&("before"==b.separator&&h.push({text:"|"}),b.prependToContext?h.unshift(b):h.push(b),"after"==b.separator&&h.push({text:"|"}))});for(c=0;c<h.length;c++)"|"==h[c].text&&(0!==c&&c!=h.length-1||h.splice(c,1));e.menu=h;
if(!e.menu.length)return null}return e}var f,c=[],a=[];if(d.menu)for(f in d.menu)a.push(f);else for(f in x)a.push(f);f="string"==typeof d.menubar?d.menubar.split(/[ ,]/):a;for(a=0;a<f.length;a++){var e=f[a];(e=k(e))&&c.push(e)}return c}function y(d){function f(b){(b=d.find(b)[0])&&b.focus(!0)}b.shortcuts.add("Alt+F9","",function(){f("menubar")});b.shortcuts.add("Alt+F10","",function(){f("toolbar")});b.shortcuts.add("Alt+F11","",function(){f("elementpath")});d.on("cancel",function(){b.focus()})}function t(k,
f){var c,a,e,g;e=b.getContainer();g=b.getContentAreaContainer().firstChild;a=e.clientWidth;c=g.clientWidth;null!==k&&(k=Math.max(d.min_width||100,k),k=Math.min(d.max_width||65535,k),n.setStyle(e,"width",k+(a-c)),n.setStyle(g,"width",k));f=Math.max(d.min_height||100,f);f=Math.min(d.max_height||65535,f);n.setStyle(g,"height",f);b.fire("ResizeEditor")}function z(){function d(h){var a,c;a=tinymce.DOM.getPos(b.getContentAreaContainer());h=b.dom.getRect(h);c=b.dom.getRoot();"BODY"==c.nodeName&&(h.x-=c.ownerDocument.documentElement.scrollLeft||
c.scrollLeft,h.y-=c.ownerDocument.documentElement.scrollTop||c.scrollTop);h.x+=a.x;h.y+=a.y;return h}function f(){p(b.contextToolbars,function(b){b.panel&&b.panel.hide()})}function c(a){var c,e,g,l,m,n;b.removed||(a&&a.toolbar.panel?(n="tc-bc bc-tc tl-bl bl-tl tr-br br-tr".split(" "),m=a.toolbar.panel,m.show(),g=d(a.element),e=tinymce.DOM.getRect(m.getEl()),l=tinymce.DOM.getRect(b.getContentAreaContainer()||b.getBody()),b.inline||(l.w=b.getDoc().documentElement.offsetWidth),b.selection.controlSelection.isResizable(a.element)&&
(g=q.inflate(g,0,7)),(c=q.findBestRelativePosition(e,g,l,n))?(p(n.concat("inside"),function(b){m.classes.toggle("tinymce-inline-"+b,b==c)}),a=q.relativePosition(e,g,c),m.moveTo(a.x,a.y)):(p(n,function(b){m.classes.toggle("tinymce-inline-"+b,!1)}),m.classes.toggle("tinymce-inline-inside",!0),(g=q.intersect(l,g))?(c=q.findBestRelativePosition(e,g,l,["tc-tc","tl-tl","tr-tr"]))?(a=q.relativePosition(e,g,c),m.moveTo(a.x,a.y)):m.moveTo(g.x,g.y):m.hide())):f())}function a(){function a(){b.selection&&c(l(b.selection.getNode()))}
window.requestAnimationFrame?window.requestAnimationFrame(a):a()}function e(){m||(m=b.selection.getScrollContainer()||b.getWin(),tinymce.$(m).on("scroll",a),b.on("remove",function(){tinymce.$(m).off("scroll")}))}function g(){tinymce.each(b.contextToolbars||[],function(b){b.panel&&b.panel.hide()})}function l(a){var c,d,e=b.contextToolbars||[];d=b.$(a).parents().add(a);for(a=d.length-1;0<=a;a--)for(c=e.length-1;0<=c;c--)if(e[c].predicate(d[a]))return{toolbar:e[c],element:d[a]};return null}var m;b.on("click keyup blur",
function(){window.setTimeout(function(){var a;if(!b.removed)if(a=l(b.selection.getNode())){var d;a.toolbar.panel?a.toolbar.panel.show():(e(),d=r.create({type:"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:u(a.toolbar.items)}),a.toolbar.panel=d,d.renderTo(document.body).reflow());c(a)}else g()},0)});b.on("ObjectResizeStart",function(){var a=l(b.selection.getNode());a&&a.toolbar.panel&&
a.toolbar.panel.hide()});b.on("nodeChange ResizeEditor ResizeWindow",a);b.on("remove",function(){tinymce.each(b.contextToolbars||[],function(a){a.panel&&a.panel.remove()});b.contextToolbars={}})}function A(k){function f(){if(g&&g.moveRel&&g.visible()&&!g._fixed){var a=b.selection.getScrollContainer(),c=b.getBody(),d=0,e=0;a&&(e=n.getPos(c),a=n.getPos(a),d=Math.max(0,a.x-e.x),e=Math.max(0,a.y-e.y));g.fixed(!1).moveRel(c,b.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(d,e)}}function c(){g&&
(g.show(),f(),n.addClass(b.getBody(),"mce-edit-focus"))}function a(){g&&(g.hide(),B.hideAll(),n.removeClass(b.getBody(),"mce-edit-focus"))}function e(){g?g.visible()||c():(g=l.panel=r.create({type:p?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!p,border:1,items:[!1===d.menubar?null:{type:"menubar",border:"0 0 1 0",items:w()},v(d.toolbar_items_size)]}),b.fire("BeforeRenderUI"),g.renderTo(p||document.body).reflow(),
y(g),c(),z(),b.on("nodeChange",f),b.on("activate",c),b.on("deactivate",a),b.nodeChanged())}var g,p;d.fixed_toolbar_container&&(p=n.select(d.fixed_toolbar_container)[0]);d.content_editable=!0;b.on("focus",function(){k.skinUiCss?tinymce.DOM.styleSheetLoader.load(k.skinUiCss,e,e):e()});b.on("blur hide",a);b.on("remove",function(){g&&(g.remove(),g=null)});k.skinUiCss&&tinymce.DOM.styleSheetLoader.load(k.skinUiCss);return{}}function C(k){var f,c,a,e;k.skinUiCss&&tinymce.DOM.loadCSS(k.skinUiCss);a=l.panel=
r.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[!1===d.menubar?null:{type:"menubar",border:"0 0 1 0",items:w()},v(d.toolbar_items_size),{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]});!1!==d.resize&&(e={type:"resizehandle",direction:d.resize,onResizeStart:function(){var a=b.getContentAreaContainer().firstChild;f=a.clientWidth;c=a.clientHeight},onResize:function(a){"both"==d.resize?t(f+
a.deltaX,c+a.deltaY):t(null,c+a.deltaY)}});!1!==d.statusbar&&a.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath"},e]});d.readonly&&a.find("*").disabled(!0);b.fire("BeforeRenderUI");a.renderBefore(k.targetNode).reflow();d.width&&tinymce.DOM.setStyle(a.getEl(),"width",d.width);b.on("remove",function(){a.remove();a=null});y(a);z();return{iframeContainer:a.find("#iframe")[0].getEl(),editorContainer:a.getEl()}}var l=this,d=b.settings,
r=tinymce.ui.Factory,p=tinymce.each,n=tinymce.DOM,q=tinymce.ui.Rect,B=tinymce.ui.FloatPanel,x={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}};l.renderUI=function(k){var f=!1!==d.skin?d.skin||"lightgray":
!1;if(f){var c=d.skin_url,c=c?b.documentBaseURI.toAbsolute(c):tinymce.baseURL+"/skins/"+f;k.skinUiCss=7>=tinymce.Env.documentMode?c+"/skin.ie7.min.css":c+"/skin.min.css";b.contentCSS.push(c+"/content"+(b.inline?".inline":"")+".min.css")}b.on("ProgressState",function(a){l.throbber=l.throbber||new tinymce.ui.Throbber(l.panel.getEl("body"));a.state?l.throbber.show(a.time):l.throbber.hide()});return d.inline?A(k):C(k)};l.resizeTo=t;l.resizeBy=function(d,f){var c=b.getContentAreaContainer();l.resizeTo(c.clientWidth+
d,c.clientHeight+f)}});
