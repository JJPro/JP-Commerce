media-models.js:1335: WARNING - Misplaced function annotation. This JSDoc is not attached to a function node. Are you missing parentheses?
		return function( props, options ) {
		^

0 error(s), 1 warning(s)
(function e$$0(e,h,d){function a(b,f){if(!h[b]){if(!e[b]){var k="function"==typeof require&&require;if(!f&&k)return k(b,!0);if(c)return c(b,!0);k=Error("Cannot find module '"+b+"'");throw k.code="MODULE_NOT_FOUND",k;}k=h[b]={exports:{}};e[b][0].call(k.exports,function(c){var f=e[b][1][c];return a(f?f:c)},k,k.exports,e$$0,e,h,d)}return h[b].exports}for(var c="function"==typeof require&&require,b=0;b<d.length;b++)a(d[b]);return a})({1:[function(g,e,h){e=jQuery;var d,a,c;window.wp=window.wp||{};c=wp.media=
function(b){var a=c.view.MediaFrame,f;if(a)return b=_.defaults(b||{},{frame:"select"}),"select"===b.frame&&a.Select?f=new a.Select(b):"post"===b.frame&&a.Post?f=new a.Post(b):"manage"===b.frame&&a.Manage?f=new a.Manage(b):"image"===b.frame&&a.ImageDetails?f=new a.ImageDetails(b):"audio"===b.frame&&a.AudioDetails?f=new a.AudioDetails(b):"video"===b.frame&&a.VideoDetails?f=new a.VideoDetails(b):"edit-attachments"===b.frame&&a.EditAttachments&&(f=new a.EditAttachments(b)),delete b.frame,c.frame=f};_.extend(c,
{model:{},view:{},controller:{},frames:{}});h=c.model.l10n=window._wpMediaModelsL10n||{};c.model.settings=h.settings||{};delete h.settings;d=c.model.Attachment=g("./models/attachment.js");a=c.model.Attachments=g("./models/attachments.js");c.model.Query=g("./models/query.js");c.model.PostImage=g("./models/post-image.js");c.model.Selection=g("./models/selection.js");c.compare=function(b,a,c,d){return _.isEqual(b,a)?c===d?0:c>d?-1:1:b>a?-1:1};_.extend(c,{template:wp.template,post:wp.ajax.post,ajax:wp.ajax.send,
fit:function(b){var a=b.width,c=b.height,d=b.maxWidth;b=b.maxHeight;var e;_.isUndefined(d)||_.isUndefined(b)?_.isUndefined(b)?e="width":_.isUndefined(d)&&c>b&&(e="height"):e=a/c>d/b?"width":"height";return"width"===e&&a>d?{width:d,height:Math.round(d*c/a)}:"height"===e&&c>b?{width:Math.round(b*a/c),height:b}:{width:a,height:c}},truncate:function(b,a,c){a=a||30;c=c||"&hellip;";return b.length<=a?b:b.substr(0,a/2)+c+b.substr(-1*a/2)}});c.attachment=function(b){return d.get(b)};a.all=new a;c.query=function(b){return new a(null,
{props:_.extend(_.defaults(b||{},{orderby:"date"}),{query:!0})})};e(window).on("unload",function(){window.wp=null})},{"./models/attachment.js":2,"./models/attachments.js":3,"./models/post-image.js":4,"./models/query.js":5,"./models/selection.js":6}],2:[function(g,e,h){var d=Backbone.$;g=Backbone.Model.extend({sync:function(a,c,b){if(_.isUndefined(this.id))return d.Deferred().rejectWith(this).promise();if("read"===a)return b=b||{},b.context=this,b.data=_.extend(b.data||{},{action:"get-attachment",
id:this.id}),wp.media.ajax(b);if("update"===a){if(!this.get("nonces")||!this.get("nonces").update)return d.Deferred().rejectWith(this).promise();b=b||{};b.context=this;b.data=_.extend(b.data||{},{action:"save-attachment",id:this.id,nonce:this.get("nonces").update,post_id:wp.media.model.settings.post.id});c.hasChanged()&&(b.data.changes={},_.each(c.changed,function(a,c){b.data.changes[c]=this.get(c)},this));return wp.media.ajax(b)}return"delete"===a?(b=b||{},b.wait||(this.destroyed=!0),b.context=this,
b.data=_.extend(b.data||{},{action:"delete-post",id:this.id,_wpnonce:this.get("nonces")["delete"]}),wp.media.ajax(b).done(function(){this.destroyed=!0}).fail(function(){this.destroyed=!1})):Backbone.Model.prototype.sync.apply(this,arguments)},parse:function(a){if(!a)return a;a.date=new Date(a.date);a.modified=new Date(a.modified);return a},saveCompat:function(a,c){var b=this;return this.get("nonces")&&this.get("nonces").update?wp.media.post("save-attachment-compat",_.defaults({id:this.id,nonce:this.get("nonces").update,
post_id:wp.media.model.settings.post.id},a)).done(function(a,d,k){b.set(b.parse(a,k),c)}):d.Deferred().rejectWith(this).promise()}},{create:function(a){return wp.media.model.Attachments.all.push(a)},get:_.memoize(function(a,c){return wp.media.model.Attachments.all.push(c||{id:a})})});e.exports=g},{}],3:[function(g,e,h){var d=Backbone.Collection.extend({model:wp.media.model.Attachment,initialize:function(a,c){c=c||{};this.props=new Backbone.Model;this.filters=c.filters||{};this.props.on("change",this._changeFilteredProps,
this);this.props.on("change:order",this._changeOrder,this);this.props.on("change:orderby",this._changeOrderby,this);this.props.on("change:query",this._changeQuery,this);this.props.set(_.defaults(c.props||{}));c.observe&&this.observe(c.observe)},_changeOrder:function(){this.comparator&&this.sort()},_changeOrderby:function(a,c){this.comparator&&this.comparator!==d.comparator||(c&&"post__in"!==c?this.comparator=d.comparator:delete this.comparator)},_changeQuery:function(a,c){c?(this.props.on("change",
this._requery,this),this._requery()):this.props.off("change",this._requery,this)},_changeFilteredProps:function(a){!this.props.get("query")&&_.chain(a.changed).map(function(c,b){var l=d.filters[b],f=a.get(b);if(l){if(f&&!this.filters[b])this.filters[b]=l;else{if(f||this.filters[b]!==l)return;delete this.filters[b]}return!0}},this).any().value()&&(this._source||(this._source=new d(this.models)),this.reset(this._source.filter(this.validator,this)))},validateDestroyed:!1,validator:function(a){return!this.validateDestroyed&&
a.destroyed?!1:_.all(this.filters,function(c){return!!c.call(this,a)},this)},validate:function(a,c){var b=this.validator(a),d=!!this.get(a.cid);!b&&d?this.remove(a,c):b&&!d&&this.add(a,c);return this},validateAll:function(a,c){c=c||{};_.each(a.models,function(b){this.validate(b,{silent:!0})},this);c.silent||this.trigger("reset",this,c);return this},observe:function(a){this.observers=this.observers||[];this.observers.push(a);a.on("add change remove",this._validateHandler,this);a.on("reset",this._validateAllHandler,
this);this.validateAll(a);return this},unobserve:function(a){a?(a.off(null,null,this),this.observers=_.without(this.observers,a)):(_.each(this.observers,function(a){a.off(null,null,this)},this),delete this.observers);return this},_validateHandler:function(a,c,b){b=c===this.mirroring?b:{silent:b&&b.silent};return this.validate(a,b)},_validateAllHandler:function(a,c){return this.validateAll(a,c)},mirror:function(a){if(this.mirroring&&this.mirroring===a)return this;this.unmirror();this.mirroring=a;this.reset([],
{silent:!0});this.observe(a);return this},unmirror:function(){this.mirroring&&(this.unobserve(this.mirroring),delete this.mirroring)},more:function(a){var c=jQuery.Deferred(),b=this.mirroring,d=this;if(!b||!b.more)return c.resolveWith(this).promise();b.more(a).done(function(){this===d.mirroring&&c.resolveWith(this)});return c.promise()},hasMore:function(){return this.mirroring?this.mirroring.hasMore():!1},parse:function(a,c){_.isArray(a)||(a=[a]);return _.map(a,function(a){var d;a instanceof Backbone.Model?
(d=a.get("id"),a=a.attributes):d=a.id;d=wp.media.model.Attachment.get(d);a=d.parse(a,c);_.isEqual(d.attributes,a)||d.set(a);return d})},_requery:function(a){var c;this.props.get("query")&&(c=this.props.toJSON(),c.cache=!0!==a,this.mirror(wp.media.model.Query.get(c)))},saveMenuOrder:function(){if("menuOrder"===this.props.get("orderby")){var a=this.chain().filter(function(a){return!_.isUndefined(a.id)}).map(function(a,b){b+=1;a.set("menuOrder",b);return[a.id,b]}).object().value();if(!_.isEmpty(a))return wp.media.post("save-attachment-order",
{nonce:wp.media.model.settings.post.nonce,post_id:wp.media.model.settings.post.id,attachments:a})}}},{comparator:function(a,c,b){var d=this.props.get("orderby"),f=this.props.get("order")||"DESC",k=a.cid,e=c.cid;a=a.get(d);c=c.get(d);if("date"===d||"modified"===d)a=a||new Date,c=c||new Date;b&&b.ties&&(k=e=null);return"DESC"===f?wp.media.compare(a,c,k,e):wp.media.compare(c,a,e,k)},filters:{search:function(a){return this.props.get("search")?_.any(["title","filename","description","caption","name"],
function(c){return(c=a.get(c))&&-1!==c.search(this.props.get("search"))},this):!0},type:function(a){var c=this.props.get("type");a=a.toJSON();var b;if(!c||_.isArray(c)&&!c.length)return!0;b=a.mime||a.file&&a.file.type||"";return _.isArray(c)?_.find(c,function(a){return-1!==b.indexOf(a)}):-1!==b.indexOf(c)},uploadedTo:function(a){var c=this.props.get("uploadedTo");return _.isUndefined(c)?!0:c===a.get("uploadedTo")},status:function(a){var c=this.props.get("status");return _.isUndefined(c)?!0:c===a.get("status")}}});
e.exports=d},{}],4:[function(g,e,h){g=Backbone.Model.extend({initialize:function(d){var a=wp.media.model.Attachment;this.attachment=!1;d.attachment_id&&(this.attachment=a.get(d.attachment_id),this.attachment.get("url")?(this.dfd=jQuery.Deferred(),this.dfd.resolve()):this.dfd=this.attachment.fetch(),this.bindAttachmentListeners());this.on("change:link",this.updateLinkUrl,this);this.on("change:size",this.updateSize,this);this.setLinkTypeFromUrl();this.setAspectRatio();this.set("originalUrl",d.url)},
bindAttachmentListeners:function(){this.listenTo(this.attachment,"sync",this.setLinkTypeFromUrl);this.listenTo(this.attachment,"sync",this.setAspectRatio);this.listenTo(this.attachment,"change",this.updateSize)},changeAttachment:function(d,a){this.stopListening(this.attachment);this.attachment=d;this.bindAttachmentListeners();this.set("attachment_id",this.attachment.get("id"));this.set("caption",this.attachment.get("caption"));this.set("alt",this.attachment.get("alt"));this.set("size",a.get("size"));
this.set("align",a.get("align"));this.set("link",a.get("link"));this.updateLinkUrl();this.updateSize()},setLinkTypeFromUrl:function(){var d=this.get("linkUrl"),a;d?(a="custom",this.attachment?this.attachment.get("url")===d?a="file":this.attachment.get("link")===d&&(a="post"):this.get("url")===d&&(a="file"),this.set("link",a)):this.set("link","none")},updateLinkUrl:function(){var d;switch(this.get("link")){case "file":d=this.attachment?this.attachment.get("url"):this.get("url");this.set("linkUrl",
d);break;case "post":this.set("linkUrl",this.attachment.get("link"));break;case "none":this.set("linkUrl","")}},updateSize:function(){var d;if(this.attachment)if("custom"===this.get("size"))this.set("width",this.get("customWidth")),this.set("height",this.get("customHeight")),this.set("url",this.get("originalUrl"));else if(d=this.attachment.get("sizes")[this.get("size")])this.set("url",d.url),this.set("width",d.width),this.set("height",d.height)},setAspectRatio:function(){var d;if(this.attachment&&
this.attachment.get("sizes")&&(d=this.attachment.get("sizes").full)){this.set("aspectRatio",d.width/d.height);return}this.set("aspectRatio",this.get("customWidth")/this.get("customHeight"))}});e.exports=g},{}],5:[function(g,e,h){var d=wp.media.model.Attachments,a;a=d.extend({initialize:function(a,b){var e;b=b||{};d.prototype.initialize.apply(this,arguments);this.args=b.args;this._hasMore=!0;this.created=new Date;this.filters.order=function(a){var b=this.props.get("orderby"),c=this.props.get("order");
return this.comparator?this.length?1!==this.comparator(a,this.last(),{ties:!0}):"DESC"!==c||"date"!==b&&"modified"!==b?"ASC"===c&&"menuOrder"===b?0===a.get(b):!1:a.get(b)>=this.created:!0};e="s order orderby posts_per_page post_mime_type post_parent".split(" ");wp.Uploader&&_(this.args).chain().keys().difference(e).isEmpty().value()&&this.observe(wp.Uploader.queue)},hasMore:function(){return this._hasMore},more:function(a){var b=this;if(this._more&&"pending"===this._more.state())return this._more;
if(!this.hasMore())return jQuery.Deferred().resolveWith(this).promise();a=a||{};a.remove=!1;return this._more=this.fetch(a).done(function(a){if(_.isEmpty(a)||-1===this.args.posts_per_page||a.length<this.args.posts_per_page)b._hasMore=!1})},sync:function(a,b,e){var f;return"read"===a?(e=e||{},e.context=this,e.data=_.extend(e.data||{},{action:"query-attachments",post_id:wp.media.model.settings.post.id}),f=_.clone(this.args),-1!==f.posts_per_page&&(f.paged=Math.round(this.length/f.posts_per_page)+1),
e.data.query=f,wp.media.ajax(e)):(d.prototype.sync?d.prototype:Backbone).sync.apply(this,arguments)}},{defaultProps:{orderby:"date",order:"DESC"},defaultArgs:{posts_per_page:40},orderby:{allowed:"name author date title modified uploadedTo id post__in menuOrder".split(" "),valuemap:{id:"ID",uploadedTo:"parent",menuOrder:"menu_order ID"}},propmap:{search:"s",type:"post_mime_type",perPage:"posts_per_page",menuOrder:"menu_order",uploadedTo:"post_parent",status:"post_status",include:"post__in",exclude:"post__not_in"},
get:function(){var c=[];return function(b,d){var e={},k=a.orderby,g=a.defaultProps,h,m=!!b.cache||_.isUndefined(b.cache);delete b.query;delete b.cache;_.defaults(b,g);b.order=b.order.toUpperCase();"DESC"!==b.order&&"ASC"!==b.order&&(b.order=g.order.toUpperCase());_.contains(k.allowed,b.orderby)||(b.orderby=g.orderby);_.each(["include","exclude"],function(a){b[a]&&!_.isArray(b[a])&&(b[a]=[b[a]])});_.each(b,function(b,c){_.isNull(b)||(e[a.propmap[c]||c]=b)});_.defaults(e,a.defaultArgs);e.orderby=k.valuemap[b.orderby]||
b.orderby;m?h=_.find(c,function(a){return _.isEqual(a.args,e)}):c=[];h||(h=new a([],_.extend(d||{},{props:b,args:e})),c.push(h));return h}}()});e.exports=a},{}],6:[function(g,e,h){var d=wp.media.model.Attachments;g=d.extend({initialize:function(a,c){d.prototype.initialize.apply(this,arguments);this.multiple=c&&c.multiple;this.on("add remove reset",_.bind(this.single,this,!1))},add:function(a,c){this.multiple||this.remove(this.models);return d.prototype.add.call(this,a,c)},single:function(a){var c=
this._single;a&&(this._single=a);this._single&&!this.get(this._single.cid)&&delete this._single;this._single=this._single||this.last();this._single!==c&&(c&&(c.trigger("selection:unsingle",c,this),this.get(c.cid)||this.trigger("selection:unsingle",c,this)),this._single&&this._single.trigger("selection:single",this._single,this));return this._single}});e.exports=g},{}]},{},[1]);
