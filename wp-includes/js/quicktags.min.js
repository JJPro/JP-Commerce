var QTags,edCanvas,edButtons=[],edAddTag=function(){},edCheckOpenTags=function(){},edCloseAllTags=function(){},edInsertImage=function(){},edInsertLink=function(){},edInsertTag=function(){},edLink=function(){},edQuickLink=function(){},edRemoveTag=function(){},edShowButton=function(){},edShowLinks=function(){},edSpell=function(){},edToolbar=function(){};function quicktags(l){return new QTags(l)}function edInsertContent(l,p){return QTags.insertContent(p)}
function edButton(l,p,q,a,c){return QTags.addButton(l,p,q,a,c,"",-1)}
(function(){function l(c){c=(c||"").replace(/&([^#])(?![a-z1-4]{1,8};)/gi,"&#038;$1");return c.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var p=function(c){var b,f,d,a;"undefined"!==typeof jQuery?jQuery(document).ready(c):(b=p,b.funcs=[],b.ready=function(){if(!b.isReady)for(b.isReady=!0,f=0;f<b.funcs.length;f++)b.funcs[f]()},b.isReady?c():b.funcs.push(c),b.eventAttached||(document.addEventListener?(d=function(){document.removeEventListener("DOMContentLoaded",
d,!1);b.ready()},document.addEventListener("DOMContentLoaded",d,!1),window.addEventListener("load",b.ready,!1)):document.attachEvent&&(d=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",d),b.ready())},document.attachEvent("onreadystatechange",d),window.attachEvent("onload",b.ready),a=function(){try{document.documentElement.doScroll("left")}catch(c){setTimeout(a,50);return}b.ready()},a()),b.eventAttached=!0))},q=function(){var c=new Date,b;b=function(b){b=b.toString();
2>b.length&&(b="0"+b);return b};return c.getUTCFullYear()+"-"+b(c.getUTCMonth()+1)+"-"+b(c.getUTCDate())+"T"+b(c.getUTCHours())+":"+b(c.getUTCMinutes())+":"+b(c.getUTCSeconds())+"+00:00"}(),a;a=QTags=function(c){if("string"===typeof c)c={id:c};else if("object"!==typeof c)return!1;var b=this,f=c.id,d=document.getElementById(f),g="qt_"+f,e,h,k;if(!f||!d)return!1;b.name=g;b.id=f;b.canvas=d;b.settings=c;"content"!==f||"string"!==typeof adminpage||"post-new-php"!==adminpage&&"post-php"!==adminpage?e=g+
"_toolbar":(edCanvas=d,e="ed_toolbar");c=document.getElementById(e);c||(c=document.createElement("div"),c.id=e,c.className="quicktags-toolbar");d.parentNode.insertBefore(c,d);b.toolbar=c;e=function(c){c=c||window.event;c=c.target||c.srcElement;var a;(c.clientWidth||c.offsetWidth)&&/ ed_button /.test(" "+c.className+" ")&&(b.canvas=d=document.getElementById(f),a=c.id.replace(g+"_",""),b.theButtons[a]&&b.theButtons[a].callback.call(b.theButtons[a],c,d,b))};k=function(){window.wpActiveEditor=f};h=document.getElementById("wp-"+
f+"-wrap");c.addEventListener?(c.addEventListener("click",e,!1),h&&h.addEventListener("click",k,!1)):c.attachEvent&&(c.attachEvent("onclick",e),h&&h.attachEvent("onclick",k));b.getButton=function(c){return b.theButtons[c]};b.getButtonElement=function(b){return document.getElementById(g+"_"+b)};a.instances[f]=b;a.instances["0"]||(a.instances["0"]=a.instances[f],p(function(){a._buttonsInit()}))};a.instances={};a.getInstance=function(c){return a.instances[c]};a._buttonsInit=function(){var c,b,f,d,g,
e,h,k;for(g in this.instances)if("0"!==g){e=this.instances[g];c=e.name;b=e.settings;d="";f={};k="";b.buttons&&(k=","+b.buttons+",");for(h in edButtons)edButtons[h]&&(b=edButtons[h].id,k&&-1!==",strong,em,link,block,del,ins,img,ul,ol,li,code,more,close,".indexOf(","+b+",")&&-1===k.indexOf(","+b+",")||edButtons[h].instance&&edButtons[h].instance!==g||(f[b]=edButtons[h],edButtons[h].html&&(d+=edButtons[h].html(c+"_"))));k&&-1!==k.indexOf(",dfw,")&&(f.dfw=new a.DFWButton,d+=f.dfw.html(c+"_"));"rtl"===
document.getElementsByTagName("html")[0].dir&&(f.textdirection=new a.TextDirectionButton,d+=f.textdirection.html(c+"_"));e.toolbar.innerHTML=d;e.theButtons=f;"undefined"!==typeof jQuery&&jQuery(document).triggerHandler("quicktags-init",[e])}this.buttonsInitDone=!0};a.addButton=function(c,b,f,d,g,e,h,k,m){if(c&&b){h=h||0;d=d||"";m=m||{};if("function"===typeof f)c=new a.Button(c,b,g,e,k,m),c.callback=f;else if("string"===typeof f)c=new a.TagButton(c,b,f,d,g,e,k,m);else return;if(-1===h)return c;if(0<
h){for(;"undefined"!==typeof edButtons[h];)h++;edButtons[h]=c}else edButtons[edButtons.length]=c;this.buttonsInitDone&&this._buttonsInit()}};a.insertContent=function(c){var b,a,d,g,e=document.getElementById(wpActiveEditor);if(!e)return!1;document.selection?(e.focus(),b=document.selection.createRange(),b.text=c):e.selectionStart||0===e.selectionStart?(g=e.value,b=e.selectionStart,a=e.selectionEnd,d=e.scrollTop,e.value=g.substring(0,b)+c+g.substring(a,g.length),e.selectionStart=b+c.length,e.selectionEnd=
b+c.length,e.scrollTop=d):e.value+=c;e.focus();return!0};a.Button=function(c,b,a,d,g,e){this.id=c;this.display=b;this.access="";this.title=d||"";this.instance=g||"";this.attr=e||{}};a.Button.prototype.html=function(c){var b,a,d=this.title?' title="'+l(this.title)+'"':"",g=this.attr&&this.attr.ariaLabel?' aria-label="'+l(this.attr.ariaLabel)+'"':"";a=this.display?' value="'+l(this.display)+'"':"";c=this.id?' id="'+l(c+this.id)+'"':"";var e=(b=window.wp)&&b.editor&&b.editor.dfw;return"fullscreen"===
this.id?'<button type="button"'+c+' class="ed_button qt-dfw qt-fullscreen"'+d+g+"></button>":"dfw"===this.id?(b=e&&e.isActive()?"":' disabled="disabled"',a=e&&e.isOn()?" active":"",'<button type="button"'+c+' class="ed_button qt-dfw'+a+'"'+d+g+b+"></button>"):'<input type="button"'+c+' class="ed_button button button-small"'+d+g+a+" />"};a.Button.prototype.callback=function(){};a.TagButton=function(c,b,f,d,g,e,h,k){a.Button.call(this,c,b,g,e,h,k);this.tagStart=f;this.tagEnd=d};a.TagButton.prototype=
new a.Button;a.TagButton.prototype.openTag=function(c,b){b.openTags||(b.openTags=[]);this.tagEnd&&(b.openTags.push(this.id),c.value="/"+c.value,this.attr.ariaLabelClose&&c.setAttribute("aria-label",this.attr.ariaLabelClose))};a.TagButton.prototype.closeTag=function(c,b){var a=this.isOpen(b);!1!==a&&b.openTags.splice(a,1);c.value=this.display;this.attr.ariaLabel&&c.setAttribute("aria-label",this.attr.ariaLabel)};a.TagButton.prototype.isOpen=function(c){var b=0,a=!1;if(c.openTags)for(;!1===a&&b<c.openTags.length;)a=
c.openTags[b]===this.id?b:!1,b++;else a=!1;return a};a.TagButton.prototype.callback=function(c,b,a){var d,g,e,h,k=b.value,m,l,n=k?this.tagEnd:"";document.selection?(b.focus(),d=document.selection.createRange(),0<d.text.length?d.text=this.tagEnd?this.tagStart+d.text+n:d.text+this.tagStart:this.tagEnd?!1===this.isOpen(a)?(d.text=this.tagStart,this.openTag(c,a)):(d.text=n,this.closeTag(c,a)):d.text=this.tagStart):b.selectionStart||0===b.selectionStart?(d=b.selectionStart,e=g=b.selectionEnd,h=b.scrollTop,
m=k.substring(0,d),l=k.substring(g,k.length),k=k.substring(d,g),d!==g?this.tagEnd?(b.value=m+this.tagStart+k+n+l,e+=this.tagStart.length+n.length):(b.value=m+k+this.tagStart+l,e+=this.tagStart.length):this.tagEnd?!1===this.isOpen(a)?(b.value=m+this.tagStart+l,this.openTag(c,a),e=d+this.tagStart.length):(b.value=m+n+l,e=d+n.length,this.closeTag(c,a)):(b.value=m+this.tagStart+l,e=d+this.tagStart.length),b.selectionStart=e,b.selectionEnd=e,b.scrollTop=h):n?!1!==this.isOpen(a)?(b.value+=this.tagStart,
this.openTag(c,a)):(b.value+=n,this.closeTag(c,a)):b.value+=this.tagStart;b.focus()};a.SpellButton=function(){};a.CloseButton=function(){a.Button.call(this,"close",quicktagsL10n.closeTags,"",quicktagsL10n.closeAllOpenTags)};a.CloseButton.prototype=new a.Button;a._close=function(c,b,a){var d,g,e=a.openTags;if(e)for(;0<e.length;)d=a.getButton(e[e.length-1]),g=document.getElementById(a.name+"_"+d.id),c?d.callback.call(d,g,b,a):d.closeTag(g,a)};a.CloseButton.prototype.callback=a._close;a.closeAllTags=
function(c){c=this.getInstance(c);a._close("",c.canvas,c)};a.LinkButton=function(){a.TagButton.call(this,"link","link","","</a>","","","",{ariaLabel:quicktagsL10n.link})};a.LinkButton.prototype=new a.TagButton;a.LinkButton.prototype.callback=function(c,b,f,d){if("undefined"!==typeof wpLink)wpLink.open(f.id);else if(d||(d="http://"),!1===this.isOpen(f)){if(d=prompt(quicktagsL10n.enterURL,d))this.tagStart='<a href="'+d+'">',a.TagButton.prototype.callback.call(this,c,b,f)}else a.TagButton.prototype.callback.call(this,
c,b,f)};a.ImgButton=function(){a.TagButton.call(this,"img","img","","","","","",{ariaLabel:quicktagsL10n.image})};a.ImgButton.prototype=new a.TagButton;a.ImgButton.prototype.callback=function(c,b,f,d){d||(d="http://");d=prompt(quicktagsL10n.enterImageURL,d);var g;d&&(g=prompt(quicktagsL10n.enterImageDescription,""),this.tagStart='<img src="'+d+'" alt="'+g+'" />',a.TagButton.prototype.callback.call(this,c,b,f))};a.DFWButton=function(){a.Button.call(this,"dfw","","f",quicktagsL10n.dfw)};a.DFWButton.prototype=
new a.Button;a.DFWButton.prototype.callback=function(){var a;(a=window.wp)&&a.editor&&a.editor.dfw&&window.wp.editor.dfw.toggle()};a.TextDirectionButton=function(){a.Button.call(this,"textdirection",quicktagsL10n.textdirection,"",quicktagsL10n.toggleTextdirection)};a.TextDirectionButton.prototype=new a.Button;a.TextDirectionButton.prototype.callback=function(a,b){var f="rtl"===document.getElementsByTagName("html")[0].dir,d=b.style.direction;d||(d=f?"rtl":"ltr");b.style.direction="rtl"===d?"ltr":"rtl";
b.focus()};edButtons[10]=new a.TagButton("strong","b","<strong>","</strong>","","","",{ariaLabel:quicktagsL10n.strong,ariaLabelClose:quicktagsL10n.strongClose});edButtons[20]=new a.TagButton("em","i","<em>","</em>","","","",{ariaLabel:quicktagsL10n.em,ariaLabelClose:quicktagsL10n.emClose});edButtons[30]=new a.LinkButton;edButtons[40]=new a.TagButton("block","b-quote","\n\n<blockquote>","</blockquote>\n\n","","","",{ariaLabel:quicktagsL10n.blockquote,ariaLabelClose:quicktagsL10n.blockquoteClose});
edButtons[50]=new a.TagButton("del","del",'<del datetime="'+q+'">',"</del>","","","",{ariaLabel:quicktagsL10n.del,ariaLabelClose:quicktagsL10n.delClose});edButtons[60]=new a.TagButton("ins","ins",'<ins datetime="'+q+'">',"</ins>","","","",{ariaLabel:quicktagsL10n.ins,ariaLabelClose:quicktagsL10n.insClose});edButtons[70]=new a.ImgButton;edButtons[80]=new a.TagButton("ul","ul","<ul>\n","</ul>\n\n","","","",{ariaLabel:quicktagsL10n.ul,ariaLabelClose:quicktagsL10n.ulClose});edButtons[90]=new a.TagButton("ol",
"ol","<ol>\n","</ol>\n\n","","","",{ariaLabel:quicktagsL10n.ol,ariaLabelClose:quicktagsL10n.olClose});edButtons[100]=new a.TagButton("li","li","\t<li>","</li>\n","","","",{ariaLabel:quicktagsL10n.li,ariaLabelClose:quicktagsL10n.liClose});edButtons[110]=new a.TagButton("code","code","<code>","</code>","","","",{ariaLabel:quicktagsL10n.code,ariaLabelClose:quicktagsL10n.codeClose});edButtons[120]=new a.TagButton("more","more","\x3c!--more--\x3e\n\n","","","","",{ariaLabel:quicktagsL10n.more});edButtons[140]=
new a.CloseButton})();
