(function(a){function m(){var h=a("#wp-auth-check"),c=a("#wp-auth-check-form"),f=b.find(".wp-auth-fallback-expired"),d,g=!1;c.length&&(a(window).on("beforeunload.wp-auth-check",function(a){a.originalEvent.returnValue=window.authcheckL10n.beforeunload}),d=a('<iframe id="wp-auth-check-frame" frameborder="0">').attr("title",f.text()),d.load(function(){var d,e;g=!0;try{e=a(this).contents().find("body"),d=e.height()}catch(l){b.addClass("fallback");h.css("max-height","");c.remove();f.focus();return}d?e&&
e.hasClass("interim-login-success")?k():h.css("max-height",d+40+"px"):e&&e.length||(b.addClass("fallback"),h.css("max-height",""),c.remove(),f.focus())}).attr("src",c.data("src")),a("#wp-auth-check-form").append(d));a("body").addClass("modal-open");b.removeClass("hidden");d?(d.focus(),setTimeout(function(){g||(b.addClass("fallback"),c.remove(),f.focus())},1E4)):f.focus()}function k(){a(window).off("beforeunload.wp-auth-check");"undefined"===typeof adminpage||"post-php"!==adminpage&&"post-new-php"!==
adminpage||"undefined"===typeof wp||!wp.heartbeat||(a(document).off("heartbeat-tick.wp-auth-check"),wp.heartbeat.connectNow());b.fadeOut(200,function(){b.addClass("hidden").css("display","");a("#wp-auth-check-frame").remove();a("body").removeClass("modal-open")})}function g(){var a=parseInt(window.authcheckL10n.interval,10)||180;l=(new Date).getTime()+1E3*a}var b,l;a(document).on("heartbeat-tick.wp-auth-check",function(a,c){"wp-auth-check"in c&&(g(),!c["wp-auth-check"]&&b.hasClass("hidden")?m():c["wp-auth-check"]&&
!b.hasClass("hidden")&&k())}).on("heartbeat-send.wp-auth-check",function(a,b){(new Date).getTime()>l&&(b["wp-auth-check"]=!0)}).ready(function(){g();b=a("#wp-auth-check-wrap");b.find(".wp-auth-check-close").on("click",function(){k()})})})(jQuery);
