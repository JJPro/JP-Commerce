window.wp=window.wp||{};
(function(){wp.shortcode={next:function(a,b,c){var e=wp.shortcode.regexp(a);e.lastIndex=c||0;if(c=e.exec(b)){if("["===c[1]&&"]"===c[7])return wp.shortcode.next(a,b,e.lastIndex);a={index:c.index,content:c[0],shortcode:wp.shortcode.fromMatch(c)};c[1]&&(a.content=a.content.slice(1),a.index++);c[7]&&(a.content=a.content.slice(0,-1));return a}},replace:function(a,b,c){return b.replace(wp.shortcode.regexp(a),function(a,b,h,k,l,m,n,f){if("["===b&&"]"===f)return a;var g=c(wp.shortcode.fromMatch(arguments));return g?
b+g+f:a})},string:function(a){return(new wp.shortcode(a)).string()},regexp:_.memoize(function(a){return new RegExp("\\[(\\[?)("+a+")(?![\\w-])([^\\]\\/]*(?:\\/(?!\\])[^\\]\\/]*)*?)(?:(\\/)\\]|\\](?:([^\\[]*(?:\\[(?!\\/\\2\\])[^\\[]*)*)(\\[\\/\\2\\]))?)(\\]?)","g")}),attrs:_.memoize(function(a){var b={},c=[],e,d;e=/(\w+)\s*=\s*"([^"]*)"(?:\s|$)|(\w+)\s*=\s*\'([^\']*)\'(?:\s|$)|(\w+)\s*=\s*([^\s\'"]+)(?:\s|$)|"([^"]*)"(?:\s|$)|(\S+)(?:\s|$)/g;for(a=a.replace(/[\u00a0\u200b]/g," ");d=e.exec(a);)d[1]?
b[d[1].toLowerCase()]=d[2]:d[3]?b[d[3].toLowerCase()]=d[4]:d[5]?b[d[5].toLowerCase()]=d[6]:d[7]?c.push(d[7]):d[8]&&c.push(d[8]);return{named:b,numeric:c}}),fromMatch:function(a){return new wp.shortcode({tag:a[2],attrs:a[3],type:a[4]?"self-closing":a[6]?"closed":"single",content:a[5]})}};wp.shortcode=_.extend(function(a){_.extend(this,_.pick(a||{},"tag","attrs","type","content"));var b=this.attrs;this.attrs={named:{},numeric:[]};b&&(_.isString(b)?this.attrs=wp.shortcode.attrs(b):_.isEqual(_.keys(b),
["named","numeric"])?this.attrs=b:_.each(a.attrs,function(a,b){this.set(b,a)},this))},wp.shortcode);_.extend(wp.shortcode.prototype,{get:function(a){return this.attrs[_.isNumber(a)?"numeric":"named"][a]},set:function(a,b){this.attrs[_.isNumber(a)?"numeric":"named"][a]=b;return this},string:function(){var a="["+this.tag;_.each(this.attrs.numeric,function(b){a=/\s/.test(b)?a+(' "'+b+'"'):a+(" "+b)});_.each(this.attrs.named,function(b,c){a+=" "+c+'="'+b+'"'});if("single"===this.type)return a+"]";if("self-closing"===
this.type)return a+" /]";a+="]";this.content&&(a+=this.content);return a+"[/"+this.tag+"]"}})})();
(function(){wp.html=_.extend(wp.html||{},{attrs:function(a){var b;"/"===a[a.length-1]&&(a=a.slice(0,-1));a=wp.shortcode.attrs(a);b=a.named;_.each(a.numeric,function(a){/\s/.test(a)||(b[a]="")});return b},string:function(a){var b="<"+a.tag,c=a.content||"";_.each(a.attrs,function(a,c){b+=" "+c;""!==a&&(_.isBoolean(a)&&(a=a?"true":"false"),b+='="'+a+'"')});if(a.single)return b+" />";b+=">";b+=_.isObject(c)?wp.html.string(c):c;return b+"</"+a.tag+">"}})})();
