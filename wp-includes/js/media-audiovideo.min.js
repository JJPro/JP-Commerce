(function e$$0(f,g,a){function b(d,k){if(!g[d]){if(!f[d]){var h="function"==typeof require&&require;if(!k&&h)return h(d,!0);if(c)return c(d,!0);h=Error("Cannot find module '"+d+"'");throw h.code="MODULE_NOT_FOUND",h;}h=g[d]={exports:{}};f[d][0].call(h.exports,function(a){var c=f[d][1][a];return b(c?c:a)},h,h.exports,e$$0,f,g,a)}return g[d].exports}for(var c="function"==typeof require&&require,d=0;d<a.length;d++)b(a[d]);return b})({1:[function(e,f,g){f=wp.media;g=window._wpMediaViewsL10n||{};wp.media.mixin=
{mejsSettings:window._wpmejsSettings||{},removeAllPlayers:function(){var a;if(window.mejs&&window.mejs.players)for(a in window.mejs.players)window.mejs.players[a].pause(),this.removePlayer(window.mejs.players[a])},removePlayer:function(a){var b,c;if(a.options){for(b in a.options.features)if(c=a.options.features[b],a["clean"+c])try{a["clean"+c](a)}catch(d){}a.isDynamic||a.$node.remove();"native"!==a.media.pluginType&&a.$media.remove();delete window.mejs.players[a.id];a.container.remove();a.globalUnbind();
delete a.node.player}},unsetPlayers:function(){this.players&&this.players.length&&(_.each(this.players,function(a){a.pause();wp.media.mixin.removePlayer(a)}),this.players=[])}};wp.media.playlist=new wp.media.collection({tag:"playlist",editTitle:g.editPlaylistTitle,defaults:{id:wp.media.view.settings.post.id,style:"light",tracklist:!0,tracknumbers:!0,images:!0,artists:!0,type:"audio"}});wp.media.audio={coerce:wp.media.coerce,defaults:{id:wp.media.view.settings.post.id,src:"",loop:!1,autoplay:!1,preload:"none",
width:400},edit:function(a){a=wp.shortcode.next("audio",a).shortcode;return wp.media({frame:"audio",state:"audio-details",metadata:_.defaults(a.attrs.named,this.defaults)})},shortcode:function(a){var b;_.each(this.defaults,function(c,d){a[d]=this.coerce(a,d);c===a[d]&&delete a[d]},this);b=a.content;delete a.content;return new wp.shortcode({tag:"audio",attrs:a,content:b})}};wp.media.video={coerce:wp.media.coerce,defaults:{id:wp.media.view.settings.post.id,src:"",poster:"",loop:!1,autoplay:!1,preload:"metadata",
content:"",width:640,height:360},edit:function(a){a=wp.shortcode.next("video",a).shortcode;var b;b=a.attrs.named;b.content=a.content;return wp.media({frame:"video",state:"video-details",metadata:_.defaults(b,this.defaults)})},shortcode:function(a){var b;_.each(this.defaults,function(c,d){a[d]=this.coerce(a,d);c===a[d]&&delete a[d]},this);b=a.content;delete a.content;return new wp.shortcode({tag:"video",attrs:a,content:b})}};f.model.PostMedia=e("./models/post-media.js");f.controller.AudioDetails=e("./controllers/audio-details.js");
f.controller.VideoDetails=e("./controllers/video-details.js");f.view.MediaFrame.MediaDetails=e("./views/frame/media-details.js");f.view.MediaFrame.AudioDetails=e("./views/frame/audio-details.js");f.view.MediaFrame.VideoDetails=e("./views/frame/video-details.js");f.view.MediaDetails=e("./views/media-details.js");f.view.AudioDetails=e("./views/audio-details.js");f.view.VideoDetails=e("./views/video-details.js")},{"./controllers/audio-details.js":2,"./controllers/video-details.js":3,"./models/post-media.js":4,
"./views/audio-details.js":5,"./views/frame/audio-details.js":6,"./views/frame/media-details.js":7,"./views/frame/video-details.js":8,"./views/media-details.js":9,"./views/video-details.js":10}],2:[function(e,f,g){var a=wp.media.controller.State;e=a.extend({defaults:{id:"audio-details",toolbar:"audio-details",title:wp.media.view.l10n.audioDetailsTitle,content:"audio-details",menu:"audio-details",router:!1,priority:60},initialize:function(b){this.media=b.media;a.prototype.initialize.apply(this,arguments)}});
f.exports=e},{}],3:[function(e,f,g){var a=wp.media.controller.State;e=a.extend({defaults:{id:"video-details",toolbar:"video-details",title:wp.media.view.l10n.videoDetailsTitle,content:"video-details",menu:"video-details",router:!1,priority:60},initialize:function(b){this.media=b.media;a.prototype.initialize.apply(this,arguments)}});f.exports=e},{}],4:[function(e,f,g){e=Backbone.Model.extend({initialize:function(){this.attachment=!1},setSource:function(a){this.attachment=a;this.extension=a.get("filename").split(".").pop();
this.get("src")&&this.extension===this.get("src").split(".").pop()&&this.unset("src");_.contains(wp.media.view.settings.embedExts,this.extension)?this.set(this.extension,this.attachment.get("url")):this.unset(this.extension)},changeAttachment:function(a){this.setSource(a);this.unset("src");_.each(_.without(wp.media.view.settings.embedExts,this.extension),function(a){this.unset(a)},this)}});f.exports=e},{}],5:[function(e,f,g){var a=wp.media.view.MediaDetails;e=a.extend({className:"audio-details",template:wp.template("audio-details"),
setMedia:function(){var b=this.$(".wp-audio-shortcode");b.find("source").length?(b.is(":hidden")&&b.show(),this.media=a.prepareSrc(b.get(0))):(b.hide(),this.media=!1);return this}});f.exports=e},{}],6:[function(e,f,g){var a=wp.media.view.MediaFrame.MediaDetails,b=wp.media.controller.MediaLibrary,c=wp.media.view.l10n;e=a.extend({defaults:{id:"audio",url:"",menu:"audio-details",content:"audio-details",toolbar:"audio-details",type:"link",title:c.audioDetailsTitle,priority:120},initialize:function(d){d.DetailsView=
wp.media.view.AudioDetails;d.cancelText=c.audioDetailsCancel;d.addText=c.audioAddSourceTitle;a.prototype.initialize.call(this,d)},bindHandlers:function(){a.prototype.bindHandlers.apply(this,arguments);this.on("toolbar:render:replace-audio",this.renderReplaceToolbar,this);this.on("toolbar:render:add-audio-source",this.renderAddSourceToolbar,this)},createStates:function(){this.states.add([new wp.media.controller.AudioDetails({media:this.media}),new b({type:"audio",id:"replace-audio",title:c.audioReplaceTitle,
toolbar:"replace-audio",media:this.media,menu:"audio-details"}),new b({type:"audio",id:"add-audio-source",title:c.audioAddSourceTitle,toolbar:"add-audio-source",media:this.media,menu:!1})])}});f.exports=e},{}],7:[function(e,f,g){var a=wp.media.view.MediaFrame.Select,b=wp.media.view.l10n;e=a.extend({defaults:{id:"media",url:"",menu:"media-details",content:"media-details",toolbar:"media-details",type:"link",priority:120},initialize:function(c){this.DetailsView=c.DetailsView;this.cancelText=c.cancelText;
this.addText=c.addText;this.media=new wp.media.model.PostMedia(c.metadata);this.options.selection=new wp.media.model.Selection(this.media.attachment,{multiple:!1});a.prototype.initialize.apply(this,arguments)},bindHandlers:function(){var c=this.defaults.menu;a.prototype.bindHandlers.apply(this,arguments);this.on("menu:create:"+c,this.createMenu,this);this.on("content:render:"+c,this.renderDetailsContent,this);this.on("menu:render:"+c,this.renderMenu,this);this.on("toolbar:render:"+c,this.renderDetailsToolbar,
this)},renderDetailsContent:function(){var a=(new this.DetailsView({controller:this,model:this.state().media,attachment:this.state().media.attachment})).render();this.content.set(a)},renderMenu:function(a){var d=this.lastState(),b=d&&d.id,e=this;a.set({cancel:{text:this.cancelText,priority:20,click:function(){b?e.setState(b):e.close()}},separateCancel:new wp.media.View({className:"separator",priority:40})})},setPrimaryButton:function(a,d){this.toolbar.set(new wp.media.view.Toolbar({controller:this,
items:{button:{style:"primary",text:a,priority:80,click:function(){var a=this.controller;d.call(this,a,a.state());a.setState(a.options.state);a.reset()}}}}))},renderDetailsToolbar:function(){this.setPrimaryButton(b.update,function(a,d){a.close();d.trigger("update",a.media.toJSON())})},renderReplaceToolbar:function(){this.setPrimaryButton(b.replace,function(a,d){var b=d.get("selection").single();a.media.changeAttachment(b);d.trigger("replace",a.media.toJSON())})},renderAddSourceToolbar:function(){this.setPrimaryButton(this.addText,
function(a,d){var b=d.get("selection").single();a.media.setSource(b);d.trigger("add-source",a.media.toJSON())})}});f.exports=e},{}],8:[function(e,f,g){var a=wp.media.view.MediaFrame.MediaDetails,b=wp.media.controller.MediaLibrary,c=wp.media.view.l10n;e=a.extend({defaults:{id:"video",url:"",menu:"video-details",content:"video-details",toolbar:"video-details",type:"link",title:c.videoDetailsTitle,priority:120},initialize:function(d){d.DetailsView=wp.media.view.VideoDetails;d.cancelText=c.videoDetailsCancel;
d.addText=c.videoAddSourceTitle;a.prototype.initialize.call(this,d)},bindHandlers:function(){a.prototype.bindHandlers.apply(this,arguments);this.on("toolbar:render:replace-video",this.renderReplaceToolbar,this);this.on("toolbar:render:add-video-source",this.renderAddSourceToolbar,this);this.on("toolbar:render:select-poster-image",this.renderSelectPosterImageToolbar,this);this.on("toolbar:render:add-track",this.renderAddTrackToolbar,this)},createStates:function(){this.states.add([new wp.media.controller.VideoDetails({media:this.media}),
new b({type:"video",id:"replace-video",title:c.videoReplaceTitle,toolbar:"replace-video",media:this.media,menu:"video-details"}),new b({type:"video",id:"add-video-source",title:c.videoAddSourceTitle,toolbar:"add-video-source",media:this.media,menu:!1}),new b({type:"image",id:"select-poster-image",title:c.videoSelectPosterImageTitle,toolbar:"select-poster-image",media:this.media,menu:"video-details"}),new b({type:"text",id:"add-track",title:c.videoAddTrackTitle,toolbar:"add-track",media:this.media,
menu:"video-details"})])},renderSelectPosterImageToolbar:function(){this.setPrimaryButton(c.videoSelectPosterImageTitle,function(a,b){var c=[],e=b.get("selection").single();a.media.set("poster",e.get("url"));b.trigger("set-poster-image",a.media.toJSON());_.each(wp.media.view.settings.embedExts,function(b){a.media.get(b)&&c.push(a.media.get(b))});wp.ajax.send("set-attachment-thumbnail",{data:{urls:c,thumbnail_id:e.get("id")}})})},renderAddTrackToolbar:function(){this.setPrimaryButton(c.videoAddTrackTitle,
function(a,b){var c=b.get("selection").single(),e=a.media.get("content");-1===e.indexOf(c.get("url"))&&(e+=['<track srclang="en" label="English" kind="subtitles" src="',c.get("url"),'" />'].join(""),a.media.set("content",e));b.trigger("add-track",a.media.toJSON())})}});f.exports=e},{}],9:[function(e,f,g){var a=wp.media.view.Settings.AttachmentDisplay,b=jQuery,c;c=a.extend({initialize:function(){_.bindAll(this,"success");this.players=[];this.listenTo(this.controller,"close",wp.media.mixin.unsetPlayers);
this.on("ready",this.setPlayer);this.on("media:setting:remove",wp.media.mixin.unsetPlayers,this);this.on("media:setting:remove",this.render);this.on("media:setting:remove",this.setPlayer);this.events=_.extend(this.events,{"click .remove-setting":"removeSetting","change .content-track":"setTracks","click .remove-track":"setTracks","click .add-media-source":"addSource"});a.prototype.initialize.apply(this,arguments)},prepare:function(){return _.defaults({model:this.model.toJSON()},this.options)},removeSetting:function(a){a=
b(a.currentTarget).parent();var c;if(c=a.find("input").data("setting"))this.model.unset(c),this.trigger("media:setting:remove",this);a.remove()},setTracks:function(){var a="";_.each(this.$(".content-track"),function(c){a+=b(c).val()});this.model.set("content",a);this.trigger("media:setting:remove",this)},addSource:function(a){this.controller.lastMime=b(a.currentTarget).data("mime");this.controller.setState("add-"+this.controller.defaults.id+"-source")},loadPlayer:function(){this.players.push(new MediaElementPlayer(this.media,
this.settings));this.scriptXhr=!1},setPlayer:function(){var a;this.players.length||!this.media||this.scriptXhr||(-1<this.model.get("src").indexOf("vimeo")&&!("Froogaloop"in window)?(a=wp.media.mixin.mejsSettings,this.scriptXhr=b.getScript(a.pluginPath+"froogaloop.min.js",_.bind(this.loadPlayer,this))):this.loadPlayer())},setMedia:function(){return this},success:function(a){var b=a.attributes.autoplay&&"false"!==a.attributes.autoplay;"flash"===a.pluginType&&b&&a.addEventListener("canplay",function(){a.play()},
!1);this.mejs=a},render:function(){a.prototype.render.apply(this,arguments);setTimeout(_.bind(function(){this.resetFocus()},this),10);this.settings=_.defaults({success:this.success},wp.media.mixin.mejsSettings);return this.setMedia()},resetFocus:function(){this.$(".embed-media-settings").scrollTop(0)}},{instances:0,prepareSrc:function(a){var e=c.instances++;_.each(b(a).find("source"),function(a){a.src=[a.src,-1<a.src.indexOf("?")?"&":"?","_=",e].join("")});return a}});f.exports=c},{}],10:[function(e,
f,g){var a=wp.media.view.MediaDetails;e=a.extend({className:"video-details",template:wp.template("video-details"),setMedia:function(){var b=this.$(".wp-video-shortcode");b.find("source").length?(b.is(":hidden")&&b.show(),b.hasClass("youtube-video")||b.hasClass("vimeo-video")?this.media=b.get(0):this.media=a.prepareSrc(b.get(0))):(b.hide(),this.media=!1);return this}});f.exports=e},{}]},{},[1]);
